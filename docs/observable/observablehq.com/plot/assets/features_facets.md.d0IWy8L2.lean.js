import{b as u,s as _,c as P,f as r,e as p,g as N,h as x,i as D,u as S,j as W,t as B,n as R,k as M,m as G}from"./chunks/theme.C_36pXDy.js";import{i as q}from"./chunks/bls-industry-unemployment.G4Tdhy2r.js";import{p as d}from"./chunks/penguins.BmegR6FY.js";import{D as V,v as I,C as T,c as O,o as U,j as a,G as n,ah as l,a as i,N as g,k as e}from"./chunks/framework.DM5DyJ2q.js";const j=JSON.parse('[{"series":"1","x":"10","y":"8.04"},{"series":"1","x":"8","y":"6.95"},{"series":"1","x":"13","y":"7.58"},{"series":"1","x":"9","y":"8.81"},{"series":"1","x":"11","y":"8.33"},{"series":"1","x":"14","y":"9.96"},{"series":"1","x":"6","y":"7.24"},{"series":"1","x":"4","y":"4.26"},{"series":"1","x":"12","y":"10.84"},{"series":"1","x":"7","y":"4.81"},{"series":"1","x":"5","y":"5.68"},{"series":"2","x":"10","y":"9.14"},{"series":"2","x":"8","y":"8.14"},{"series":"2","x":"13","y":"8.74"},{"series":"2","x":"9","y":"8.77"},{"series":"2","x":"11","y":"9.26"},{"series":"2","x":"14","y":"8.1"},{"series":"2","x":"6","y":"6.13"},{"series":"2","x":"4","y":"3.1"},{"series":"2","x":"12","y":"9.13"},{"series":"2","x":"7","y":"7.26"},{"series":"2","x":"5","y":"4.74"},{"series":"3","x":"10","y":"7.46"},{"series":"3","x":"8","y":"6.77"},{"series":"3","x":"13","y":"12.74"},{"series":"3","x":"9","y":"7.11"},{"series":"3","x":"11","y":"7.81"},{"series":"3","x":"14","y":"8.84"},{"series":"3","x":"6","y":"6.08"},{"series":"3","x":"4","y":"5.39"},{"series":"3","x":"12","y":"8.15"},{"series":"3","x":"7","y":"6.42"},{"series":"3","x":"5","y":"5.73"},{"series":"4","x":"8","y":"6.58"},{"series":"4","x":"8","y":"5.76"},{"series":"4","x":"8","y":"7.71"},{"series":"4","x":"8","y":"8.84"},{"series":"4","x":"8","y":"8.47"},{"series":"4","x":"8","y":"7.04"},{"series":"4","x":"8","y":"5.25"},{"series":"4","x":"19","y":"12.5"},{"series":"4","x":"8","y":"5.56"},{"series":"4","x":"8","y":"7.91"},{"series":"4","x":"8","y":"6.89"}]'),c=j.map(({...k})=>u(k)),z=JSON.parse('[{"yield":"27","variety":"Manchuria","year":"1931","site":"University Farm"},{"yield":"48.86667","variety":"Manchuria","year":"1931","site":"Waseca"},{"yield":"27.43334","variety":"Manchuria","year":"1931","site":"Morris"},{"yield":"39.93333","variety":"Manchuria","year":"1931","site":"Crookston"},{"yield":"32.96667","variety":"Manchuria","year":"1931","site":"Grand Rapids"},{"yield":"28.96667","variety":"Manchuria","year":"1931","site":"Duluth"},{"yield":"43.06666","variety":"Glabron","year":"1931","site":"University Farm"},{"yield":"55.2","variety":"Glabron","year":"1931","site":"Waseca"},{"yield":"28.76667","variety":"Glabron","year":"1931","site":"Morris"},{"yield":"38.13333","variety":"Glabron","year":"1931","site":"Crookston"},{"yield":"29.13333","variety":"Glabron","year":"1931","site":"Grand Rapids"},{"yield":"29.66667","variety":"Glabron","year":"1931","site":"Duluth"},{"yield":"35.13333","variety":"Svansota","year":"1931","site":"University Farm"},{"yield":"47.33333","variety":"Svansota","year":"1931","site":"Waseca"},{"yield":"25.76667","variety":"Svansota","year":"1931","site":"Morris"},{"yield":"40.46667","variety":"Svansota","year":"1931","site":"Crookston"},{"yield":"29.66667","variety":"Svansota","year":"1931","site":"Grand Rapids"},{"yield":"25.7","variety":"Svansota","year":"1931","site":"Duluth"},{"yield":"39.9","variety":"Velvet","year":"1931","site":"University Farm"},{"yield":"50.23333","variety":"Velvet","year":"1931","site":"Waseca"},{"yield":"26.13333","variety":"Velvet","year":"1931","site":"Morris"},{"yield":"41.33333","variety":"Velvet","year":"1931","site":"Crookston"},{"yield":"23.03333","variety":"Velvet","year":"1931","site":"Grand Rapids"},{"yield":"26.3","variety":"Velvet","year":"1931","site":"Duluth"},{"yield":"36.56666","variety":"Trebi","year":"1931","site":"University Farm"},{"yield":"63.8333","variety":"Trebi","year":"1931","site":"Waseca"},{"yield":"43.76667","variety":"Trebi","year":"1931","site":"Morris"},{"yield":"46.93333","variety":"Trebi","year":"1931","site":"Crookston"},{"yield":"29.76667","variety":"Trebi","year":"1931","site":"Grand Rapids"},{"yield":"33.93333","variety":"Trebi","year":"1931","site":"Duluth"},{"yield":"43.26667","variety":"No. 457","year":"1931","site":"University Farm"},{"yield":"58.1","variety":"No. 457","year":"1931","site":"Waseca"},{"yield":"28.7","variety":"No. 457","year":"1931","site":"Morris"},{"yield":"45.66667","variety":"No. 457","year":"1931","site":"Crookston"},{"yield":"32.16667","variety":"No. 457","year":"1931","site":"Grand Rapids"},{"yield":"33.6","variety":"No. 457","year":"1931","site":"Duluth"},{"yield":"36.6","variety":"No. 462","year":"1931","site":"University Farm"},{"yield":"65.7667","variety":"No. 462","year":"1931","site":"Waseca"},{"yield":"30.36667","variety":"No. 462","year":"1931","site":"Morris"},{"yield":"48.56666","variety":"No. 462","year":"1931","site":"Crookston"},{"yield":"24.93334","variety":"No. 462","year":"1931","site":"Grand Rapids"},{"yield":"28.1","variety":"No. 462","year":"1931","site":"Duluth"},{"yield":"32.76667","variety":"Peatland","year":"1931","site":"University Farm"},{"yield":"48.56666","variety":"Peatland","year":"1931","site":"Waseca"},{"yield":"29.86667","variety":"Peatland","year":"1931","site":"Morris"},{"yield":"41.6","variety":"Peatland","year":"1931","site":"Crookston"},{"yield":"34.7","variety":"Peatland","year":"1931","site":"Grand Rapids"},{"yield":"32","variety":"Peatland","year":"1931","site":"Duluth"},{"yield":"24.66667","variety":"No. 475","year":"1931","site":"University Farm"},{"yield":"46.76667","variety":"No. 475","year":"1931","site":"Waseca"},{"yield":"22.6","variety":"No. 475","year":"1931","site":"Morris"},{"yield":"44.1","variety":"No. 475","year":"1931","site":"Crookston"},{"yield":"19.7","variety":"No. 475","year":"1931","site":"Grand Rapids"},{"yield":"33.06666","variety":"No. 475","year":"1931","site":"Duluth"},{"yield":"39.3","variety":"Wisconsin No. 38","year":"1931","site":"University Farm"},{"yield":"58.8","variety":"Wisconsin No. 38","year":"1931","site":"Waseca"},{"yield":"29.46667","variety":"Wisconsin No. 38","year":"1931","site":"Morris"},{"yield":"49.86667","variety":"Wisconsin No. 38","year":"1931","site":"Crookston"},{"yield":"34.46667","variety":"Wisconsin No. 38","year":"1931","site":"Grand Rapids"},{"yield":"31.6","variety":"Wisconsin No. 38","year":"1931","site":"Duluth"},{"yield":"26.9","variety":"Manchuria","year":"1932","site":"University Farm"},{"yield":"33.46667","variety":"Manchuria","year":"1932","site":"Waseca"},{"yield":"34.36666","variety":"Manchuria","year":"1932","site":"Morris"},{"yield":"32.96667","variety":"Manchuria","year":"1932","site":"Crookston"},{"yield":"22.13333","variety":"Manchuria","year":"1932","site":"Grand Rapids"},{"yield":"22.56667","variety":"Manchuria","year":"1932","site":"Duluth"},{"yield":"36.8","variety":"Glabron","year":"1932","site":"University Farm"},{"yield":"37.73333","variety":"Glabron","year":"1932","site":"Waseca"},{"yield":"35.13333","variety":"Glabron","year":"1932","site":"Morris"},{"yield":"26.16667","variety":"Glabron","year":"1932","site":"Crookston"},{"yield":"14.43333","variety":"Glabron","year":"1932","site":"Grand Rapids"},{"yield":"25.86667","variety":"Glabron","year":"1932","site":"Duluth"},{"yield":"27.43334","variety":"Svansota","year":"1932","site":"University Farm"},{"yield":"38.5","variety":"Svansota","year":"1932","site":"Waseca"},{"yield":"35.03333","variety":"Svansota","year":"1932","site":"Morris"},{"yield":"20.63333","variety":"Svansota","year":"1932","site":"Crookston"},{"yield":"16.63333","variety":"Svansota","year":"1932","site":"Grand Rapids"},{"yield":"22.23333","variety":"Svansota","year":"1932","site":"Duluth"},{"yield":"26.8","variety":"Velvet","year":"1932","site":"University Farm"},{"yield":"37.4","variety":"Velvet","year":"1932","site":"Waseca"},{"yield":"38.83333","variety":"Velvet","year":"1932","site":"Morris"},{"yield":"32.06666","variety":"Velvet","year":"1932","site":"Crookston"},{"yield":"32.23333","variety":"Velvet","year":"1932","site":"Grand Rapids"},{"yield":"22.46667","variety":"Velvet","year":"1932","site":"Duluth"},{"yield":"29.06667","variety":"Trebi","year":"1932","site":"University Farm"},{"yield":"49.2333","variety":"Trebi","year":"1932","site":"Waseca"},{"yield":"46.63333","variety":"Trebi","year":"1932","site":"Morris"},{"yield":"41.83333","variety":"Trebi","year":"1932","site":"Crookston"},{"yield":"20.63333","variety":"Trebi","year":"1932","site":"Grand Rapids"},{"yield":"30.6","variety":"Trebi","year":"1932","site":"Duluth"},{"yield":"26.43334","variety":"No. 457","year":"1932","site":"University Farm"},{"yield":"42.2","variety":"No. 457","year":"1932","site":"Waseca"},{"yield":"43.53334","variety":"No. 457","year":"1932","site":"Morris"},{"yield":"34.33333","variety":"No. 457","year":"1932","site":"Crookston"},{"yield":"19.46667","variety":"No. 457","year":"1932","site":"Grand Rapids"},{"yield":"22.7","variety":"No. 457","year":"1932","site":"Duluth"},{"yield":"25.56667","variety":"No. 462","year":"1932","site":"University Farm"},{"yield":"44.7","variety":"No. 462","year":"1932","site":"Waseca"},{"yield":"47","variety":"No. 462","year":"1932","site":"Morris"},{"yield":"30.53333","variety":"No. 462","year":"1932","site":"Crookston"},{"yield":"19.9","variety":"No. 462","year":"1932","site":"Grand Rapids"},{"yield":"22.5","variety":"No. 462","year":"1932","site":"Duluth"},{"yield":"28.06667","variety":"Peatland","year":"1932","site":"University Farm"},{"yield":"36.03333","variety":"Peatland","year":"1932","site":"Waseca"},{"yield":"43.2","variety":"Peatland","year":"1932","site":"Morris"},{"yield":"25.23333","variety":"Peatland","year":"1932","site":"Crookston"},{"yield":"26.76667","variety":"Peatland","year":"1932","site":"Grand Rapids"},{"yield":"31.36667","variety":"Peatland","year":"1932","site":"Duluth"},{"yield":"30","variety":"No. 475","year":"1932","site":"University Farm"},{"yield":"41.26667","variety":"No. 475","year":"1932","site":"Waseca"},{"yield":"44.23333","variety":"No. 475","year":"1932","site":"Morris"},{"yield":"32.13333","variety":"No. 475","year":"1932","site":"Crookston"},{"yield":"15.23333","variety":"No. 475","year":"1932","site":"Grand Rapids"},{"yield":"27.36667","variety":"No. 475","year":"1932","site":"Duluth"},{"yield":"38","variety":"Wisconsin No. 38","year":"1932","site":"University Farm"},{"yield":"58.16667","variety":"Wisconsin No. 38","year":"1932","site":"Waseca"},{"yield":"47.16667","variety":"Wisconsin No. 38","year":"1932","site":"Morris"},{"yield":"35.9","variety":"Wisconsin No. 38","year":"1932","site":"Crookston"},{"yield":"20.66667","variety":"Wisconsin No. 38","year":"1932","site":"Grand Rapids"},{"yield":"29.33333","variety":"Wisconsin No. 38","year":"1932","site":"Duluth"}]'),A=z.map(({...k})=>u(k)),H=JSON.parse('{"title":"Facets","description":"","frontmatter":{},"headers":[],"relativePath":"features/facets.md","filePath":"features/facets.md"}'),L={name:"features/facets.md"},Q=Object.assign(L,{setup(k){const m=V([{weight:31,height:1.21,sex:"female"},{weight:170,height:2.21,sex:"male"}]),o=_({color:{type:"categorical"}}).range;return I(()=>{P("../data/athletes.csv",u).then(F=>m.value=F)}),(F,s)=>{const h=T("PlotRender"),f=T("VersionBadge");return U(),O("div",null,[s[34]||(s[34]=a("h1",{id:"facets",tabindex:"-1"},[i("Facets "),a("a",{class:"header-anchor",href:"#facets","aria-label":'Permalink to "Facets"'},"​")],-1)),s[35]||(s[35]=a("p",null,[i("Faceting partitions data by ordinal or categorical value and then repeats a plot for each partition (each "),a("strong",null,"facet"),i("), producing "),a("a",{href:"https://en.wikipedia.org/wiki/Small_multiple",target:"_blank",rel:"noreferrer"},"small multiples"),i(" for comparison. Faceting is typically enabled by declaring the horizontal↔︎ facet channel "),a("strong",null,"fx"),i(", the vertical↕︎ facet channel "),a("strong",null,"fy"),i(", or both for two-dimensional faceting.")],-1)),a("p",null,[s[0]||(s[0]=i("For example, below we recreate the Trellis display (“reminiscent of garden trelliswork”) of ")),s[1]||(s[1]=a("a",{href:"https://hci.stanford.edu/courses/cs448b/papers/becker-trellis-jcgs.pdf",target:"_blank",rel:"noreferrer"},[i("Becker "),a("em",null,"et al.")],-1)),s[2]||(s[2]=i(" using the dot’s ")),s[3]||(s[3]=a("strong",null,"fy",-1)),s[4]||(s[4]=i(" channel to declare vertical↕︎ facets, showing the yields of several varieties of barley across several sites for the years ")),a("span",{style:g({borderBottom:`solid 2px ${e(o)[0]}`})},"1931",4),s[5]||(s[5]=i(" and ")),a("span",{style:g({borderBottom:`solid 2px ${e(o)[1]}`})},"1932",4),s[6]||(s[6]=i("."))]),n(h,{options:{height:800,marginRight:90,marginLeft:110,grid:!0,x:{nice:!0},y:{inset:5},color:{type:"categorical"},marks:[r(),p(e(A),{x:"yield",y:"variety",fy:"site",stroke:"year",sort:{y:"-x",fy:"-x",reduce:"median"}})]}},null,8,["options"]),s[36]||(s[36]=l("",4)),a("p",null,[s[7]||(s[7]=i("The chart above reveals a likely data collection error: the years appear to be reversed for the Morris site as it is the only site where the yields in ")),a("span",{style:g({borderBottom:`solid 2px ${e(o)[1]}`})},"1932",4),s[8]||(s[8]=i(" were higher than in ")),a("span",{style:g({borderBottom:`solid 2px ${e(o)[0]}`})},"1931",4),s[9]||(s[9]=i(". The anomaly in Morris is more obvious if we use directed arrows to show the year-over-year change. The ")),s[10]||(s[10]=a("a",{href:"./../transforms/group"},"group transform",-1)),s[11]||(s[11]=i(" groups the observations by site and variety to compute the change."))]),n(h,{defer:"",options:{height:800,marginLeft:110,grid:!0,x:{nice:!0},y:{inset:5},color:{scheme:"spectral",label:"Change in yield",tickFormat:"+f",legend:!0},facet:{marginRight:90},marks:[r(),N(e(A),x({x1:"first",x2:"last",stroke:([E,y])=>y-E},{x:"yield",y:"variety",fy:"site",stroke:"yield",strokeWidth:2,sort:{y:"-x1",fy:"-x1",reduce:"median"}}))]}},null,8,["options"]),s[37]||(s[37]=l("",4)),n(h,{defer:"",options:{fy:{grid:!0,tickFormat:".1f",interval:.1,reverse:!0},marks:[D(m.value.filter(E=>E.height),{x:"weight",fy:"height"})]}},null,8,["options"]),s[38]||(s[38]=l("",4)),n(h,{defer:"",options:{grid:!0,marginRight:60,facet:{label:null},marks:[r(),p(e(d),{x:"culmen_length_mm",y:"culmen_depth_mm",fx:"sex",fy:"species"})]}},null,8,["options"]),s[39]||(s[39]=l("",3)),n(h,{defer:"",options:{grid:!0,marginRight:60,facet:{label:null},marks:[r(),p(e(d),{x:"culmen_length_mm",y:"culmen_depth_mm",fill:"#aaa",r:1}),p(e(d),{x:"culmen_length_mm",y:"culmen_depth_mm",fx:"sex",fy:"species"})]}},null,8,["options"]),s[40]||(s[40]=l("",4)),n(h,{defer:"",options:(()=>{const y=Array.from(S(e(q).map(t=>t.industry))),v=new Map(y.map((t,w)=>[t,w])),b=t=>v.get(t)%3,C=t=>Math.floor(v.get(t)/3);return{height:300,axis:null,y:{insetTop:10},fx:{padding:.03},marks:[W(e(q),R("extent",{x:"date",y:"unemployed",fx:t=>b(t.industry),fy:t=>C(t.industry)})),B(y,{fx:b,fy:C,frameAnchor:"top-left",dx:6,dy:6}),r()]}})()},null,8,["options"]),s[41]||(s[41]=l("",5)),n(h,{defer:"",options:{marginLeft:60,marginRight:60,grid:!0,y:{label:null},fy:{label:null},color:{legend:!0},marks:[M(e(d),x({x:"count"},{fy:"species",y:"island",fill:"sex"})),B(["While Chinstrap and Gentoo penguins were each observed on only one island, Adelie penguins were observed on all three islands."],{fy:["Adelie"],frameAnchor:"top-right",lineWidth:18,dx:-6,dy:6}),r()]}},null,8,["options"]),s[42]||(s[42]=l("",3)),a("p",null,[s[12]||(s[12]=i("Facets can be defined for each mark via the ")),s[13]||(s[13]=a("strong",null,"fx",-1)),s[14]||(s[14]=i(" or ")),s[15]||(s[15]=a("strong",null,"fy",-1)),s[16]||(s[16]=i(" channels. ")),n(f,{version:"0.6.1"}),s[17]||(s[17]=i(" The ")),s[18]||(s[18]=a("strong",null,"fx",-1)),s[19]||(s[19]=i(" and ")),s[20]||(s[20]=a("strong",null,"fy",-1)),s[21]||(s[21]=i(" channels are computed prior to the ")),s[22]||(s[22]=a("a",{href:"./transforms"},"mark’s transform",-1)),s[23]||(s[23]=i(", if any (")),s[24]||(s[24]=a("em",null,"i.e.",-1)),s[25]||(s[25]=i(", facet channels are not transformed). Alternatively, the ")),s[26]||(s[26]=a("a",{href:"#plot-facet-options"},[a("strong",null,"facet"),i(" plot option")],-1)),s[27]||(s[27]=i(" allows top-level faceting based on data."))]),s[43]||(s[43]=l("",3)),a("p",null,[s[28]||(s[28]=i("The ")),s[29]||(s[29]=a("strong",null,"facetAnchor",-1)),s[30]||(s[30]=i(" option")),s[31]||(s[31]=a("a",{id:"facetAnchor",href:"#facetAnchor","aria-label":'Permalink to "facetAnchor"'},null,-1)),s[32]||(s[32]=i()),n(f,{version:"0.6.3"}),s[33]||(s[33]=i(" controls the placement of the mark with respect to the facets. Based on the value, the mark will be displayed on:"))]),s[44]||(s[44]=l("",9)),n(h,{options:{grid:!0,aspectRatio:.5,facet:{data:e(c),x:"series"},marks:[r(),G(e(c),{x:"x",y:"y"}),p(e(c),{x:"x",y:"y"})]}},null,8,["options"]),s[45]||(s[45]=l("",9))])}}});export{H as __pageData,Q as default};
