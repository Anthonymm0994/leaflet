import{D as c,h as q,p as m,v as j,C as x,c as V,o as O,j as s,G as l,ah as h,a,k as n,a2 as C,ak as b,t as F}from"./chunks/framework.DM5DyJ2q.js";import{b as v,c as I,B as N,A as R,bi as e,e as g,C as T,f,bj as M}from"./chunks/theme.C_36pXDy.js";import{f as U}from"./chunks/feature.DXDMwmIR.js";import{m as G}from"./chunks/mesh.DUGB6pHu.js";import{p as d}from"./chunks/penguins.BmegR6FY.js";const L=JSON.parse('[{"eruptions":"3.600","waiting":"79"},{"eruptions":"1.800","waiting":"54"},{"eruptions":"3.333","waiting":"74"},{"eruptions":"2.283","waiting":"62"},{"eruptions":"4.533","waiting":"85"},{"eruptions":"2.883","waiting":"55"},{"eruptions":"4.700","waiting":"88"},{"eruptions":"3.600","waiting":"85"},{"eruptions":"1.950","waiting":"51"},{"eruptions":"4.350","waiting":"85"},{"eruptions":"1.833","waiting":"54"},{"eruptions":"3.917","waiting":"84"},{"eruptions":"4.200","waiting":"78"},{"eruptions":"1.750","waiting":"47"},{"eruptions":"4.700","waiting":"83"},{"eruptions":"2.167","waiting":"52"},{"eruptions":"1.750","waiting":"62"},{"eruptions":"4.800","waiting":"84"},{"eruptions":"1.600","waiting":"52"},{"eruptions":"4.250","waiting":"79"},{"eruptions":"1.800","waiting":"51"},{"eruptions":"1.750","waiting":"47"},{"eruptions":"3.450","waiting":"78"},{"eruptions":"3.067","waiting":"69"},{"eruptions":"4.533","waiting":"74"},{"eruptions":"3.600","waiting":"83"},{"eruptions":"1.967","waiting":"55"},{"eruptions":"4.083","waiting":"76"},{"eruptions":"3.850","waiting":"78"},{"eruptions":"4.433","waiting":"79"},{"eruptions":"4.300","waiting":"73"},{"eruptions":"4.467","waiting":"77"},{"eruptions":"3.367","waiting":"66"},{"eruptions":"4.033","waiting":"80"},{"eruptions":"3.833","waiting":"74"},{"eruptions":"2.017","waiting":"52"},{"eruptions":"1.867","waiting":"48"},{"eruptions":"4.833","waiting":"80"},{"eruptions":"1.833","waiting":"59"},{"eruptions":"4.783","waiting":"90"},{"eruptions":"4.350","waiting":"80"},{"eruptions":"1.883","waiting":"58"},{"eruptions":"4.567","waiting":"84"},{"eruptions":"1.750","waiting":"58"},{"eruptions":"4.533","waiting":"73"},{"eruptions":"3.317","waiting":"83"},{"eruptions":"3.833","waiting":"64"},{"eruptions":"2.100","waiting":"53"},{"eruptions":"4.633","waiting":"82"},{"eruptions":"2.000","waiting":"59"},{"eruptions":"4.800","waiting":"75"},{"eruptions":"4.716","waiting":"90"},{"eruptions":"1.833","waiting":"54"},{"eruptions":"4.833","waiting":"80"},{"eruptions":"1.733","waiting":"54"},{"eruptions":"4.883","waiting":"83"},{"eruptions":"3.717","waiting":"71"},{"eruptions":"1.667","waiting":"64"},{"eruptions":"4.567","waiting":"77"},{"eruptions":"4.317","waiting":"81"},{"eruptions":"2.233","waiting":"59"},{"eruptions":"4.500","waiting":"84"},{"eruptions":"1.750","waiting":"48"},{"eruptions":"4.800","waiting":"82"},{"eruptions":"1.817","waiting":"60"},{"eruptions":"4.400","waiting":"92"},{"eruptions":"4.167","waiting":"78"},{"eruptions":"4.700","waiting":"78"},{"eruptions":"2.067","waiting":"65"},{"eruptions":"4.700","waiting":"73"},{"eruptions":"4.033","waiting":"82"},{"eruptions":"1.967","waiting":"56"},{"eruptions":"4.500","waiting":"79"},{"eruptions":"4.000","waiting":"71"},{"eruptions":"1.983","waiting":"62"},{"eruptions":"5.067","waiting":"76"},{"eruptions":"2.017","waiting":"60"},{"eruptions":"4.567","waiting":"78"},{"eruptions":"3.883","waiting":"76"},{"eruptions":"3.600","waiting":"83"},{"eruptions":"4.133","waiting":"75"},{"eruptions":"4.333","waiting":"82"},{"eruptions":"4.100","waiting":"70"},{"eruptions":"2.633","waiting":"65"},{"eruptions":"4.067","waiting":"73"},{"eruptions":"4.933","waiting":"88"},{"eruptions":"3.950","waiting":"76"},{"eruptions":"4.517","waiting":"80"},{"eruptions":"2.167","waiting":"48"},{"eruptions":"4.000","waiting":"86"},{"eruptions":"2.200","waiting":"60"},{"eruptions":"4.333","waiting":"90"},{"eruptions":"1.867","waiting":"50"},{"eruptions":"4.817","waiting":"78"},{"eruptions":"1.833","waiting":"63"},{"eruptions":"4.300","waiting":"72"},{"eruptions":"4.667","waiting":"84"},{"eruptions":"3.750","waiting":"75"},{"eruptions":"1.867","waiting":"51"},{"eruptions":"4.900","waiting":"82"},{"eruptions":"2.483","waiting":"62"},{"eruptions":"4.367","waiting":"88"},{"eruptions":"2.100","waiting":"49"},{"eruptions":"4.500","waiting":"83"},{"eruptions":"4.050","waiting":"81"},{"eruptions":"1.867","waiting":"47"},{"eruptions":"4.700","waiting":"84"},{"eruptions":"1.783","waiting":"52"},{"eruptions":"4.850","waiting":"86"},{"eruptions":"3.683","waiting":"81"},{"eruptions":"4.733","waiting":"75"},{"eruptions":"2.300","waiting":"59"},{"eruptions":"4.900","waiting":"89"},{"eruptions":"4.417","waiting":"79"},{"eruptions":"1.700","waiting":"59"},{"eruptions":"4.633","waiting":"81"},{"eruptions":"2.317","waiting":"50"},{"eruptions":"4.600","waiting":"85"},{"eruptions":"1.817","waiting":"59"},{"eruptions":"4.417","waiting":"87"},{"eruptions":"2.617","waiting":"53"},{"eruptions":"4.067","waiting":"69"},{"eruptions":"4.250","waiting":"77"},{"eruptions":"1.967","waiting":"56"},{"eruptions":"4.600","waiting":"88"},{"eruptions":"3.767","waiting":"81"},{"eruptions":"1.917","waiting":"45"},{"eruptions":"4.500","waiting":"82"},{"eruptions":"2.267","waiting":"55"},{"eruptions":"4.650","waiting":"90"},{"eruptions":"1.867","waiting":"45"},{"eruptions":"4.167","waiting":"83"},{"eruptions":"2.800","waiting":"56"},{"eruptions":"4.333","waiting":"89"},{"eruptions":"1.833","waiting":"46"},{"eruptions":"4.383","waiting":"82"},{"eruptions":"1.883","waiting":"51"},{"eruptions":"4.933","waiting":"86"},{"eruptions":"2.033","waiting":"53"},{"eruptions":"3.733","waiting":"79"},{"eruptions":"4.233","waiting":"81"},{"eruptions":"2.233","waiting":"60"},{"eruptions":"4.533","waiting":"82"},{"eruptions":"4.817","waiting":"77"},{"eruptions":"4.333","waiting":"76"},{"eruptions":"1.983","waiting":"59"},{"eruptions":"4.633","waiting":"80"},{"eruptions":"2.017","waiting":"49"},{"eruptions":"5.100","waiting":"96"},{"eruptions":"1.800","waiting":"53"},{"eruptions":"5.033","waiting":"77"},{"eruptions":"4.000","waiting":"77"},{"eruptions":"2.400","waiting":"65"},{"eruptions":"4.600","waiting":"81"},{"eruptions":"3.567","waiting":"71"},{"eruptions":"4.000","waiting":"70"},{"eruptions":"4.500","waiting":"81"},{"eruptions":"4.083","waiting":"93"},{"eruptions":"1.800","waiting":"53"},{"eruptions":"3.967","waiting":"89"},{"eruptions":"2.200","waiting":"45"},{"eruptions":"4.150","waiting":"86"},{"eruptions":"2.000","waiting":"58"},{"eruptions":"3.833","waiting":"78"},{"eruptions":"3.500","waiting":"66"},{"eruptions":"4.583","waiting":"76"},{"eruptions":"2.367","waiting":"63"},{"eruptions":"5.000","waiting":"88"},{"eruptions":"1.933","waiting":"52"},{"eruptions":"4.617","waiting":"93"},{"eruptions":"1.917","waiting":"49"},{"eruptions":"2.083","waiting":"57"},{"eruptions":"4.583","waiting":"77"},{"eruptions":"3.333","waiting":"68"},{"eruptions":"4.167","waiting":"81"},{"eruptions":"4.333","waiting":"81"},{"eruptions":"4.500","waiting":"73"},{"eruptions":"2.417","waiting":"50"},{"eruptions":"4.000","waiting":"85"},{"eruptions":"4.167","waiting":"74"},{"eruptions":"1.883","waiting":"55"},{"eruptions":"4.583","waiting":"77"},{"eruptions":"4.250","waiting":"83"},{"eruptions":"3.767","waiting":"83"},{"eruptions":"2.033","waiting":"51"},{"eruptions":"4.433","waiting":"78"},{"eruptions":"4.083","waiting":"84"},{"eruptions":"1.833","waiting":"46"},{"eruptions":"4.417","waiting":"83"},{"eruptions":"2.183","waiting":"55"},{"eruptions":"4.800","waiting":"81"},{"eruptions":"1.833","waiting":"57"},{"eruptions":"4.800","waiting":"76"},{"eruptions":"4.100","waiting":"84"},{"eruptions":"3.966","waiting":"77"},{"eruptions":"4.233","waiting":"81"},{"eruptions":"3.500","waiting":"87"},{"eruptions":"4.366","waiting":"77"},{"eruptions":"2.250","waiting":"51"},{"eruptions":"4.667","waiting":"78"},{"eruptions":"2.100","waiting":"60"},{"eruptions":"4.350","waiting":"82"},{"eruptions":"4.133","waiting":"91"},{"eruptions":"1.867","waiting":"53"},{"eruptions":"4.600","waiting":"78"},{"eruptions":"1.783","waiting":"46"},{"eruptions":"4.367","waiting":"77"},{"eruptions":"3.850","waiting":"84"},{"eruptions":"1.933","waiting":"49"},{"eruptions":"4.500","waiting":"83"},{"eruptions":"2.383","waiting":"71"},{"eruptions":"4.700","waiting":"80"},{"eruptions":"1.867","waiting":"49"},{"eruptions":"3.833","waiting":"75"},{"eruptions":"3.417","waiting":"64"},{"eruptions":"4.233","waiting":"76"},{"eruptions":"2.400","waiting":"53"},{"eruptions":"4.800","waiting":"94"},{"eruptions":"2.000","waiting":"55"},{"eruptions":"4.150","waiting":"76"},{"eruptions":"1.867","waiting":"50"},{"eruptions":"4.267","waiting":"82"},{"eruptions":"1.750","waiting":"54"},{"eruptions":"4.483","waiting":"75"},{"eruptions":"4.000","waiting":"78"},{"eruptions":"4.117","waiting":"79"},{"eruptions":"4.083","waiting":"78"},{"eruptions":"4.267","waiting":"78"},{"eruptions":"3.917","waiting":"70"},{"eruptions":"4.550","waiting":"79"},{"eruptions":"4.083","waiting":"70"},{"eruptions":"2.417","waiting":"54"},{"eruptions":"4.183","waiting":"86"},{"eruptions":"2.217","waiting":"50"},{"eruptions":"4.450","waiting":"90"},{"eruptions":"1.883","waiting":"54"},{"eruptions":"1.850","waiting":"54"},{"eruptions":"4.283","waiting":"77"},{"eruptions":"3.950","waiting":"79"},{"eruptions":"2.333","waiting":"64"},{"eruptions":"4.150","waiting":"75"},{"eruptions":"2.350","waiting":"47"},{"eruptions":"4.933","waiting":"86"},{"eruptions":"2.900","waiting":"63"},{"eruptions":"4.583","waiting":"85"},{"eruptions":"3.833","waiting":"82"},{"eruptions":"2.083","waiting":"57"},{"eruptions":"4.367","waiting":"82"},{"eruptions":"2.133","waiting":"67"},{"eruptions":"4.350","waiting":"74"},{"eruptions":"2.200","waiting":"54"},{"eruptions":"4.450","waiting":"83"},{"eruptions":"3.567","waiting":"73"},{"eruptions":"4.500","waiting":"73"},{"eruptions":"4.150","waiting":"88"},{"eruptions":"3.817","waiting":"80"},{"eruptions":"3.917","waiting":"71"},{"eruptions":"4.450","waiting":"83"},{"eruptions":"2.000","waiting":"56"},{"eruptions":"4.283","waiting":"79"},{"eruptions":"4.767","waiting":"78"},{"eruptions":"4.533","waiting":"84"},{"eruptions":"1.850","waiting":"58"},{"eruptions":"4.250","waiting":"83"},{"eruptions":"1.983","waiting":"43"},{"eruptions":"2.250","waiting":"60"},{"eruptions":"4.750","waiting":"75"},{"eruptions":"4.117","waiting":"81"},{"eruptions":"2.150","waiting":"46"},{"eruptions":"4.417","waiting":"90"},{"eruptions":"1.817","waiting":"46"},{"eruptions":"4.467","waiting":"74"}]'),k=L.map(({..._})=>v(_)),W={id:"density-mark",tabindex:"-1"},z={class:"label-input"},Y={style:{"font-variant-numeric":"tabular-nums"}},J={class:"label-input"},$={style:{"font-variant-numeric":"tabular-nums"}},H={class:"language-js vp-adaptive-theme"},K={class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},Q={class:"line"},X={style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},Z={class:"label-input"},ii={style:{"font-variant-numeric":"tabular-nums"}},li=JSON.parse('{"title":"Density mark","description":"","frontmatter":{},"headers":[],"relativePath":"marks/density.md","filePath":"marks/density.md"}'),si={name:"marks/density.md"},hi=Object.assign(si,{setup(_){const w=c([]),o=c(null),A=q(()=>o.value?U(o.value,o.value.objects.nation):{type:null}),P=q(()=>o.value?G(o.value,o.value.objects.states,(p,i)=>p!==i):{type:null}),E=m(0),u=m(20),y=m(20),B=c([]);return j(()=>{I("../data/diamonds.csv",v).then(p=>B.value=p),N("../data/walmarts.tsv",v).then(p=>w.value=p),R("../data/us-counties-10m.json").then(p=>o.value=p)}),(p,i)=>{const D=x("VersionBadge"),r=x("PlotRender");return O(),V("div",null,[s("h1",W,[i[3]||(i[3]=a("Density mark ")),l(D,{version:"0.5.1"}),i[4]||(i[4]=a()),i[5]||(i[5]=s("a",{class:"header-anchor",href:"#density-mark","aria-label":'Permalink to "Density mark <VersionBadge version="0.5.1" />"'},"​",-1))]),i[15]||(i[15]=s("div",{class:"tip custom-block"},[s("p",{class:"custom-block-title"},"TIP"),s("p",null,[a("For contours of spatially-distributed quantitative values, see the "),s("a",{href:"./contour"},"contour mark"),a(".")])],-1)),i[16]||(i[16]=s("p",null,[a("The "),s("strong",null,"density mark"),a(" shows the "),s("a",{href:"https://en.wikipedia.org/wiki/Multivariate_kernel_density_estimation",target:"_blank",rel:"noreferrer"},"estimated density"),a(" of two-dimensional point clouds. Contours guide the eye towards the local peaks of concentration of the data, much like a topographic map does with elevation. This is especially useful given overplotting in dense datasets.")],-1)),l(r,{options:{inset:10,marks:[e(n(k),{x:"waiting",y:"eruptions",stroke:"var(--vp-c-blue)",strokeWidth:.25}),e(n(k),{x:"waiting",y:"eruptions",stroke:"var(--vp-c-blue)",thresholds:4}),g(n(k),{x:"waiting",y:"eruptions",fill:"currentColor",r:1.5})]}},null,8,["options"]),i[17]||(i[17]=h("",3)),s("p",null,[s("label",z,[i[6]||(i[6]=a(" Bandwidth: ")),C(s("input",{type:"range","onUpdate:modelValue":i[0]||(i[0]=t=>u.value=t),min:"0",max:"40",step:"0.2"},null,512),[[b,u.value,void 0,{number:!0}]]),s("span",Y,F(u.value.toLocaleString("en-US",{minimumFractionDigits:1})),1)])]),l(r,{defer:"",options:{inset:20,marks:[e(n(k),{x:"waiting",y:"eruptions",bandwidth:u.value}),g(n(k),{x:"waiting",y:"eruptions"})]}},null,8,["options"]),i[18]||(i[18]=h("",3)),s("p",null,[s("label",J,[i[7]||(i[7]=a(" Thresholds: ")),C(s("input",{type:"range","onUpdate:modelValue":i[1]||(i[1]=t=>y.value=t),min:"1",max:"40",step:"1"},null,512),[[b,y.value,void 0,{number:!0}]]),s("span",$,F(y.value),1)])]),l(r,{defer:"",options:{inset:20,marks:[e(n(k),{x:"waiting",y:"eruptions",thresholds:y.value}),g(n(k),{x:"waiting",y:"eruptions"})]}},null,8,["options"]),i[19]||(i[19]=h("",3)),l(r,{defer:"",options:{height:100,inset:10,marks:[e(n(k),{x:"waiting",stroke:"var(--vp-c-blue)",strokeWidth:.25,bandwidth:10}),e(n(k),{x:"waiting",stroke:"var(--vp-c-blue)",thresholds:4,bandwidth:10}),g(n(k),{x:"waiting",fill:"currentColor",r:1.5})]}},null,8,["options"]),i[20]||(i[20]=h("",3)),l(r,{defer:"",options:{projection:"albers",color:{scheme:p.$dark?"turbo":"YlGnBu"},marks:[e(w.value,{x:"longitude",y:"latitude",bandwidth:10,fill:"density"}),T(P.value,{strokeOpacity:.3}),T(A.value),g(w.value,{x:"longitude",y:"latitude",r:1,fill:"currentColor"})]}},null,8,["options"]),i[21]||(i[21]=s("a",{class:"plot-fork no-icon",href:"https://observablehq.com/@observablehq/plot-walmart-density",target:"_blank",title:"Open on Observable"},"Fork",-1)),s("div",H,[i[12]||(i[12]=s("button",{title:"Copy Code",class:"copy"},null,-1)),i[13]||(i[13]=s("span",{class:"lang"},"js",-1)),s("pre",K,[s("code",null,[i[10]||(i[10]=h("",4)),s("span",Q,[i[8]||(i[8]=s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  color: {scheme: ",-1)),s("span",X,'"'+F(p.$dark?"turbo":"YlGnBu")+'"',1),i[9]||(i[9]=s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"},",-1))]),i[11]||(i[11]=h("",14))])])]),i[22]||(i[22]=s("div",{class:"tip custom-block"},[s("p",{class:"custom-block-title"},"TIP"),s("p",null,"Use an equal-area projection with the density mark.")],-1)),i[23]||(i[23]=s("p",null,[a("By using the "),s("em",null,"density"),a(" keyword as a "),s("strong",null,"fill"),a(" or "),s("strong",null,"stroke"),a(" color, you can draw regions with a sequential color encoding.")],-1)),l(r,{defer:"",options:{inset:10,grid:!0,x:{type:"log"},y:{type:"log"},marks:[e(B.value,{x:"carat",y:"price",stroke:"density"})]}},null,8,["options"]),i[24]||(i[24]=h("",3)),l(r,{defer:"",options:{marks:[e(n(d),{fx:"island",x:"flipper_length_mm",y:"culmen_length_mm",stroke:"density",clip:!0}),f()]}},null,8,["options"]),i[25]||(i[25]=h("",3)),s("p",null,[s("label",Z,[i[14]||(i[14]=a(" Skew (-F/+M): ")),C(s("input",{type:"range","onUpdate:modelValue":i[2]||(i[2]=t=>E.value=t),min:"-1",max:"1",step:"0.01"},null,512),[[b,E.value,void 0,{number:!0}]]),s("span",ii,F(E.value.toLocaleString("en-US",{minimumFractionDigits:2,signDisplay:"always"})),1)])]),l(r,{defer:"",options:{inset:10,color:{legend:!0},marks:[e(n(d).filter(t=>t.sex),{weight:t=>t.sex==="FEMALE"?1-E.value:1+E.value,x:"flipper_length_mm",y:"culmen_length_mm",strokeOpacity:.5,clip:!0}),g(n(d).filter(t=>t.sex),{x:"flipper_length_mm",y:"culmen_length_mm",stroke:"sex",strokeOpacity:t=>t.sex==="FEMALE"?1-E.value:1+E.value}),f()]}},null,8,["options"]),i[26]||(i[26]=h("",3)),l(r,{defer:"",options:{inset:10,color:{legend:!0},marks:[M(n(d),t=>t.species).map(([t])=>e(n(d),{x:"flipper_length_mm",y:"culmen_length_mm",weight:S=>S.species===t?1:-1,fill:()=>t,fillOpacity:.2,thresholds:[.05]})),g(n(d),{x:"flipper_length_mm",y:"culmen_length_mm",stroke:"species"}),f()]}},null,8,["options"]),i[27]||(i[27]=h("",11))])}}});export{li as __pageData,hi as default};
