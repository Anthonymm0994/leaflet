import{bn as C,c as h,b as p,bx as v,w as g,m as q,t as y,n as m,by as f,bz as B,G as x,e as z,h as P,bp as _}from"./chunks/theme.C_36pXDy.js";import{D as u,v as T,C as F,c as A,o as D,j as i,G as o,ah as E,a as t,k as d}from"./chunks/framework.DM5DyJ2q.js";const S={id:"normalize",tabindex:"-1"},N=JSON.parse('{"title":"Normalize transform","description":"","frontmatter":{},"headers":[],"relativePath":"transforms/normalize.md","filePath":"transforms/normalize.md"}'),j={name:"transforms/normalize.md"},V=Object.assign(j,{setup(X){const e=u([]),k=u([]),r=C("sum",{z:"state",x:"population",y:"state"});return T(()=>{Promise.all([h("../data/aapl.csv",p),h("../data/amzn.csv",p),h("../data/goog.csv",p),h("../data/ibm.csv",p)]).then(l=>{k.value=v(["AAPL","AMZN","GOOG","IBM"],l).flatMap(([s,a])=>a.map(n=>({Symbol:s,...n})))}),h("../data/us-population-state-age.csv",p).then(l=>{const s=l.columns.slice(1);e.value=Object.assign(s.flatMap(a=>l.map(n=>({state:n.name,age:a,population:n[a]}))),{ages:s})})}),(l,s)=>{const a=F("PlotRender"),n=F("VersionBadge");return D(),A("div",null,[s[5]||(s[5]=i("h1",{id:"normalize-transform",tabindex:"-1"},[t("Normalize transform "),i("a",{class:"header-anchor",href:"#normalize-transform","aria-label":'Permalink to "Normalize transform"'},"​")],-1)),s[6]||(s[6]=i("p",null,[t("The "),i("strong",null,"normalize transform"),t(" is a specialized "),i("a",{href:"./map"},"map transform"),t(" that normalizes series values relative to some basis, say to convert absolute values into relative values. For example, here is an index chart — a type of multi-series line chart — showing the return of several stocks relative to their closing price on a particular date.")],-1)),o(a,{defer:"",options:{y:{type:"log",grid:!0,label:"Change in price (%)",tickFormat:(c=>b=>c((b-1)*100))(B("+d"))},marks:[g([1]),q(k.value,m({x:"Date",y:"Close",stroke:"Symbol"})),y(k.value,f(m({x:"Date",y:"Close",z:"Symbol",text:"Symbol",textAnchor:"start",dx:3})))]}},null,8,["options"]),s[7]||(s[7]=E("",6)),o(a,{defer:"",options:{height:660,axis:null,grid:!0,x:{axis:"top",label:"Population (%)",percent:!0},color:{scheme:"spectral",domain:e.value.ages,legend:!0},marks:[x([0]),g(e.value,P({x1:"min",x2:"max"},{...d(r),sort:{y:"x1"}})),z(e.value,{...d(r),fill:"age",title:"age"}),y(e.value,_({...d(r),textAnchor:"end",dx:-6,text:"state"}))]}},null,8,["options"]),s[8]||(s[8]=E("",7)),i("h2",S,[s[0]||(s[0]=t("normalize(")),s[1]||(s[1]=i("em",null,"basis",-1)),s[2]||(s[2]=t(") ")),o(n,{version:"0.2.3"}),s[3]||(s[3]=t()),s[4]||(s[4]=i("a",{class:"header-anchor",href:"#normalize","aria-label":'Permalink to "normalize(*basis*) <VersionBadge version="0.2.3" /> {#normalize}"'},"​",-1))]),s[9]||(s[9]=E("",12))])}}});export{N as __pageData,V as default};
