import{aG as A,s as x,c as k,b as d,G as w,J as u,h as P,H as q,aH as D,y as E,N as c,n as S,w as I,m as V}from"./chunks/theme.C_36pXDy.js";import{D as g,h as j,v as z,C as f,c as N,o as O,ah as t,G as e,j as i,t as F,a,N as b,k as v}from"./chunks/framework.DM5DyJ2q.js";const R={class:"language-js vp-adaptive-theme"},H={class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},Y={class:"line"},X={style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},G={class:"language-js vp-adaptive-theme"},W={class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},L={class:"line"},M={style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},U={id:"custom-initializers",tabindex:"-1"},$={id:"transform",tabindex:"-1"},J={id:"initializer",tabindex:"-1"},K={id:"column",tabindex:"-1"},Q={id:"identity",tabindex:"-1"},Z={id:"indexOf",tabindex:"-1"},ns=JSON.parse('{"title":"Transforms","description":"","frontmatter":{},"headers":[],"relativePath":"features/transforms.md","filePath":"features/transforms.md"}'),ss={name:"features/transforms.md"},es=Object.assign(ss,{setup(is){const m=g([]),p=g([]),o=g(["Saarbrücken-Neuhaus","Oldenburg (Holstein)","Holz","Göttelborn","Riegelsberg","Kastel","Neustadt i. H.-Süd","Nettersheim","Hasborn","Laufeld","Otzenhausen","Nonnweiler","Kirschheck","AS Eppelborn","Bierfeld","Von der Heydt","Illingen","Hetzerath","Groß Ippener","Bockel","Ladbergen","Dibbersen","Euskirchen/Bliesheim","Hürth","Lotte","Ascheberg","Bad Schwartau","Schloss Burg","Uphusen","HB-Silbersee","Barsbüttel","HB-Mahndorfer See","Glüsingen","HB-Weserbrücke","Hengsen","Köln-Nord","Hagen-Vorhalle","Unna"].map((n,s)=>({location:n,date:new Date(Date.UTC(2e3,0,1,s)),vehicles:(10+s)**2.382}))),C=j(()=>A().thresholds(80).value(n=>n.weight)(p.value)),y=x({color:{type:"categorical"}}).range;return z(()=>{k("../data/athletes.csv",d).then(n=>p.value=n),k("../data/bls-metro-unemployment.csv",d).then(n=>m.value=n),k("../data/traffic.csv",d).then(n=>o.value=n)}),(n,s)=>{const l=f("PlotRender"),r=f("VersionBadge");return O(),N("div",null,[s[49]||(s[49]=t("",3)),e(l,{defer:"",options:{marginLeft:120,x:{label:"Vehicles per hour (thousands)",transform:h=>h/1e3},y:{label:null},marks:[w([0]),u(o.value,{x:"vehicles",y:"location",strokeOpacity:.3}),u(o.value,P({x:"median"},{x:"vehicles",y:"location",stroke:"var(--vp-c-red)",strokeWidth:4,sort:{y:"x"}}))]}},null,8,["options"]),s[50]||(s[50]=t("",3)),e(l,{defer:"",options:{marginLeft:120,padding:0,y:{label:null},color:{scheme:n.$dark?"turbo":"YlGnBu",legend:!0,zero:!0},marks:[q(o.value,D({fill:"median"},{x:h=>h.date.getUTCHours(),y:"location",fill:"vehicles",inset:.5,sort:{y:"fill"}}))]}},null,8,["options"]),s[51]||(s[51]=i("a",{class:"plot-fork no-icon",href:"https://observablehq.com/@observablehq/plot-sorted-heatmap",target:"_blank",title:"Open on Observable"},"Fork",-1)),i("div",R,[s[4]||(s[4]=i("button",{title:"Copy Code",class:"copy"},null,-1)),s[5]||(s[5]=i("span",{class:"lang"},"js",-1)),i("pre",H,[i("code",null,[s[2]||(s[2]=t("",8)),i("span",Y,[s[0]||(s[0]=i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  color: {scheme: ",-1)),i("span",X,'"'+F(n.$dark?"turbo":"YlGnBu")+'"',1),s[1]||(s[1]=t("",5))]),s[3]||(s[3]=t("",20))])])]),s[52]||(s[52]=t("",4)),e(l,{defer:"",mark:E(C.value,{x1:"x0",x2:"x1",y2:"length"}),options:{}},null,8,["mark"]),s[53]||(s[53]=t("",3)),e(l,{defer:"",mark:E(p.value,c({y:"count"},{x:"weight",fill:"sex"})),options:{color:{legend:!0}}},null,8,["mark"]),s[54]||(s[54]=t("",7)),i("p",null,[s[6]||(s[6]=a("Transforms are composable: you can pass ")),s[7]||(s[7]=i("em",null,"options",-1)),s[8]||(s[8]=a(" through more than one transform before passing it to a mark. For example, above it’s a bit difficult to compare the weight distribution by sex because there are fewer ")),i("span",{style:b({borderBottom:`solid 2px ${v(y)[0]}`})},"female",4),s[9]||(s[9]=a(" than ")),i("span",{style:b({borderBottom:`solid 2px ${v(y)[1]}`})},"male",4),s[10]||(s[10]=a(" athletes in the data. We can remove this effect using the ")),s[11]||(s[11]=i("a",{href:"./../transforms/normalize"},"normalize transform",-1)),s[12]||(s[12]=a(" with the ")),s[13]||(s[13]=i("em",null,"sum",-1)),s[14]||(s[14]=a(" reducer."))]),e(l,{defer:"",options:{y:{percent:!0},marks:[E(p.value,S("sum",c({y2:"count"},{x:"weight",fill:"sex",mixBlendMode:n.$dark?"screen":"multiply"})))]}},null,8,["options"]),s[55]||(s[55]=i("a",{class:"plot-fork no-icon",href:"https://observablehq.com/@observablehq/plot-overlapping-relative-histogram",target:"_blank",title:"Open on Observable"},"Fork",-1)),i("div",G,[s[19]||(s[19]=i("button",{title:"Copy Code",class:"copy"},null,-1)),s[20]||(s[20]=i("span",{class:"lang"},"js",-1)),i("pre",W,[i("code",null,[s[17]||(s[17]=t("",18)),i("span",L,[s[15]||(s[15]=t("",5)),i("span",M,'"'+F(n.$dark?"screen":"multiply")+'"',1),s[16]||(s[16]=i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}",-1))]),s[18]||(s[18]=t("",10))])])]),s[56]||(s[56]=t("",3)),e(l,{defer:"",options:{y:{grid:!0,label:"Unemployment (%)"},color:{domain:[!1,!0],range:["#ccc","var(--vp-c-red)"]},marks:[I([0]),V(m.value,{x:"date",y:"unemployment",z:"division",transform:(h,_)=>({data:h,facets:_.map(B=>B.filter(T=>/, MI /.test(h[T].division)))})})]}},null,8,["options"]),s[57]||(s[57]=t("",6)),i("h2",U,[s[21]||(s[21]=a("Custom initializers ")),e(r,{version:"0.5.0"}),s[22]||(s[22]=a()),s[23]||(s[23]=i("a",{class:"header-anchor",href:"#custom-initializers","aria-label":'Permalink to "Custom initializers <VersionBadge version="0.5.0" />"'},"​",-1))]),s[58]||(s[58]=t("",3)),i("h2",$,[s[24]||(s[24]=a("transform(")),s[25]||(s[25]=i("em",null,"options",-1)),s[26]||(s[26]=a(", ")),s[27]||(s[27]=i("em",null,"transform",-1)),s[28]||(s[28]=a(") ")),e(r,{version:"0.4.3"}),s[29]||(s[29]=a()),s[30]||(s[30]=i("a",{class:"header-anchor",href:"#transform","aria-label":'Permalink to "transform(*options*, *transform*) <VersionBadge version="0.4.3" /> {#transform}"'},"​",-1))]),s[59]||(s[59]=t("",2)),i("h2",J,[s[31]||(s[31]=a("initializer(")),s[32]||(s[32]=i("em",null,"options",-1)),s[33]||(s[33]=a(", ")),s[34]||(s[34]=i("em",null,"initializer",-1)),s[35]||(s[35]=a(") ")),e(r,{version:"0.5.0"}),s[36]||(s[36]=a()),s[37]||(s[37]=i("a",{class:"header-anchor",href:"#initializer","aria-label":'Permalink to "initializer(*options*, *initializer*) <VersionBadge version="0.5.0" /> {#initializer}"'},"​",-1))]),s[60]||(s[60]=t("",7)),i("h2",K,[s[38]||(s[38]=a("column(")),s[39]||(s[39]=i("em",null,"source",-1)),s[40]||(s[40]=a(") ")),e(r,{version:"0.4.3"}),s[41]||(s[41]=a()),s[42]||(s[42]=i("a",{class:"header-anchor",href:"#column","aria-label":'Permalink to "column(*source*) <VersionBadge version="0.4.3" /> {#column}"'},"​",-1))]),s[61]||(s[61]=t("",3)),i("h2",Q,[s[43]||(s[43]=a("identity ")),e(r,{version:"0.6.2"}),s[44]||(s[44]=a()),s[45]||(s[45]=i("a",{class:"header-anchor",href:"#identity","aria-label":'Permalink to "identity <VersionBadge version="0.6.2" /> {#identity}"'},"​",-1))]),s[62]||(s[62]=t("",2)),i("h2",Z,[s[46]||(s[46]=a("indexOf ")),e(r,{version:"0.6.6"}),s[47]||(s[47]=a()),s[48]||(s[48]=i("a",{class:"header-anchor",href:"#indexOf","aria-label":'Permalink to "indexOf <VersionBadge version="0.6.6" /> {#indexOf}"'},"​",-1))]),s[63]||(s[63]=t("",2))])}}});export{ns as __pageData,es as default};
