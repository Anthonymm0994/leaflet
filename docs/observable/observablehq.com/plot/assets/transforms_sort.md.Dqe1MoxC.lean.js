import{p as g,D as u,h as y,v,C as m,c as C,o as B,j as i,G as o,ah as p,a,a2 as E,aj as _,t as q,al as F,k as T}from"./chunks/framework.DM5DyJ2q.js";import{c,b as w,A as P,C as x,e as S,br as A,w as j,m as D,aA as I,aD as V}from"./chunks/theme.C_36pXDy.js";import{f as R}from"./chunks/feature.DXDMwmIR.js";import{m as N}from"./chunks/mesh.DUGB6pHu.js";import{c as O}from"./chunks/cars.D_dnXTJf.js";const M={class:"label-input"},U={class:"language-js vp-adaptive-theme"},Y={class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},z={class:"line"},W={style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},G={class:"label-input"},J={style:{"margin-left":"0.5em"}},X={style:{"margin-left":"0.5em"}},L={style:{"white-space":"nowrap"}},as=JSON.parse('{"title":"Sort transform","description":"","frontmatter":{},"headers":[],"relativePath":"transforms/sort.md","filePath":"transforms/sort.md"}'),Z={name:"transforms/sort.md"},ts=Object.assign(Z,{setup($){const k=g(!0),r=g("ascending"),d=u([]),e=u(null),f=y(()=>e.value?N(e.value,e.value.objects.states):{type:null}),b=y(()=>e.value?R(e.value,e.value.objects.counties).features:[]);return v(()=>{c("../data/bls-metro-unemployment.csv",w).then(l=>d.value=l),Promise.all([P("../data/us-counties-10m.json"),c("../data/us-county-population.csv")]).then(([l,s])=>{const h=new Map(s.map(n=>[n.state+n.county,+n.population]));l.objects.counties.geometries.forEach(n=>n.properties.population=h.get(n.id)),e.value=l})}),(l,s)=>{const h=m("PlotRender"),n=m("VersionBadge");return B(),C("div",null,[s[31]||(s[31]=i("h1",{id:"sort-transform",tabindex:"-1"},[a("Sort transform "),i("a",{class:"header-anchor",href:"#sort-transform","aria-label":'Permalink to "Sort transform"'},"​")],-1)),s[32]||(s[32]=i("p",null,[a("The "),i("strong",null,"sort transform"),a(" sorts a mark’s index to change the effective order of data. The sort transform affects the order in which a mark’s graphical elements are drawn ("),i("a",{href:"https://en.wikipedia.org/wiki/Z-order",target:"_blank",rel:"noreferrer"},"z-order"),a("), which can have a dramatic effect when these elements overlap. For example, see the bubble map of U.S. county population below; when the null sort order is used for input order, many small dots are hidden underneath larger ones.")],-1)),i("p",null,[i("label",M,[s[3]||(s[3]=a(" Sort by descending radius (r): ")),E(i("input",{type:"checkbox","onUpdate:modelValue":s[0]||(s[0]=t=>k.value=t)},null,512),[[_,k.value]])])]),o(h,{defer:"",options:{projection:"albers-usa",marks:[x(f.value,{strokeOpacity:.4}),S(b.value,A({r:t=>t.properties.population,fill:"currentColor",stroke:"var(--vp-c-bg)",strokeWidth:1,sort:k.value?{channel:"-r"}:null}))]}},null,8,["options"]),s[33]||(s[33]=i("a",{class:"plot-fork no-icon",href:"https://observablehq.com/@observablehq/plot-dot-sort",target:"_blank",title:"Open on Observable"},"Fork",-1)),i("div",U,[s[8]||(s[8]=i("button",{title:"Copy Code",class:"copy"},null,-1)),s[9]||(s[9]=i("span",{class:"lang"},"js",-1)),i("pre",Y,[i("code",null,[s[6]||(s[6]=p("",14)),i("span",z,[s[4]||(s[4]=i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      stroke: ",-1)),i("span",W,'"'+q(l.$dark?"black":"white")+'"',1),s[5]||(s[5]=i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",",-1))]),s[7]||(s[7]=p("",10))])])]),s[34]||(s[34]=p("",3)),o(h,{options:{y:{grid:!0,label:"Unemployment (%)"},color:{domain:[!1,!0],range:["#ccc","var(--vp-c-red)"]},marks:[j([0]),D(d.value,{x:"date",y:"unemployment",z:"division",sort:t=>/, MI /.test(t.division),stroke:t=>/, MI /.test(t.division)})]}},null,8,["options"]),s[35]||(s[35]=p("",4)),i("p",null,[i("span",G,[s[12]||(s[12]=a(" Sort x order: ")),i("label",J,[E(i("input",{type:"radio",name:"order",value:"ascending","onUpdate:modelValue":s[1]||(s[1]=t=>r.value=t)},null,512),[[F,r.value]]),s[10]||(s[10]=a(" ascending"))]),i("label",X,[E(i("input",{type:"radio",name:"order",value:"descending","onUpdate:modelValue":s[2]||(s[2]=t=>r.value=t)},null,512),[[F,r.value]]),s[11]||(s[11]=a(" descending"))])])]),o(h,{options:{height:180,marks:[I(T(O),V({x:"weight (lb)",title:"name",fill:"currentColor",sort:{channel:"x",order:r.value}}))]}},null,8,["options"]),s[36]||(s[36]=p("",7)),i("p",null,[s[15]||(s[15]=a("In the object case, the ")),s[16]||(s[16]=i("strong",null,"channel",-1)),s[17]||(s[17]=a(" option specifies the name of the channel, while the ")),s[18]||(s[18]=i("strong",null,"order",-1)),s[19]||(s[19]=a(" option specifies ")),s[20]||(s[20]=i("em",null,"ascending",-1)),s[21]||(s[21]=a(" (the default) or ")),s[22]||(s[22]=i("em",null,"descending",-1)),s[23]||(s[23]=a(" order. You can also use the shorthand ")),i("span",L,[s[13]||(s[13]=i("em",null,"-name",-1)),s[14]||(s[14]=a()),o(n,{version:"0.6.7"})]),s[24]||(s[24]=a(" to sort by descending order of the channel with the given ")),s[25]||(s[25]=i("em",null,"name",-1)),s[26]||(s[26]=a(". For example, ")),s[27]||(s[27]=i("code",null,'sort: {channel: "-r"}',-1)),s[28]||(s[28]=a(" will sort by descending radius (")),s[29]||(s[29]=i("strong",null,"r",-1)),s[30]||(s[30]=a(")."))]),s[37]||(s[37]=p("",7))])}}});export{as as __pageData,ts as default};
