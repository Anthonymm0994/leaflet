<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Operations | Arquero API Reference | arquero</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Operations | Arquero API Reference" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Query processing and transformation of array-backed data tables." />
<meta property="og:description" content="Query processing and transformation of array-backed data tables." />
<link rel="canonical" href="op.html" />
<meta property="og:url" content="https://idl.uw.edu/arquero/api/op.html" />
<meta property="og:site_name" content="arquero" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Operations | Arquero API Reference" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Query processing and transformation of array-backed data tables.","headline":"Operations | Arquero API Reference","url":"https://idl.uw.edu/arquero/api/op.html"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="../assets/css/style.css@v=e8003b487ac362f5679ed130cb3a6597b684f903.css">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/arquero/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="https://idl.uw.edu/arquero/">arquero</a></h1>
      

      <h1 id="arquero-api-reference-">Arquero API Reference <a href="https://idl.uw.edu/arquero"><img align="right" src="../assets/logo.svg" height="38" /></a></h1>

<table>
  <tbody>
    <tr>
      <td><a href="https://idl.uw.edu/arquero/api">Top-Level</a></td>
      <td><a href="https://idl.uw.edu/arquero/api/table">Table</a></td>
      <td><a href="https://idl.uw.edu/arquero/api/verbs">Verbs</a></td>
      <td><a href="https://idl.uw.edu/arquero/api/op"><strong>Op Functions</strong></a></td>
      <td><a href="https://idl.uw.edu/arquero/api/expressions">Expressions</a></td>
      <td><a href="https://idl.uw.edu/arquero/api/extensibility">Extensibility</a></td>
    </tr>
  </tbody>
</table>

<ul>
  <li><a href="op.html#functions">Standard Functions</a>
    <ul>
      <li><a href="op.html#array-functions">Array Functions</a></li>
      <li><a href="op.html#date-functions">Date Functions</a></li>
      <li><a href="op.html#json-functions">JSON Functions</a></li>
      <li><a href="op.html#math-functions">Math Functions</a></li>
      <li><a href="op.html#object-functions">Object Functions</a></li>
      <li><a href="op.html#string-functions">String Functions</a></li>
    </ul>
  </li>
  <li><a href="op.html#aggregate-functions">Aggregate Functions</a>
    <ul>
      <li><a href="op.html#any">any</a>, <a href="op.html#bins">bins</a></li>
      <li><a href="op.html#count">count</a>, <a href="op.html#distinct">distinct</a>, <a href="op.html#valid">valid</a>, <a href="op.html#invalid">invalid</a></li>
      <li><a href="op.html#max">max</a>, <a href="op.html#min">min</a>,  <a href="op.html#sum">sum</a>, <a href="op.html#product">product</a></li>
      <li><a href="op.html#mean">mean</a>, <a href="op.html#average">average</a>, <a href="op.html#mode">mode</a>, <a href="op.html#median">median</a>, <a href="op.html#quantile">quantile</a></li>
      <li><a href="op.html#stdev">stdev</a>, <a href="op.html#stdevp">stdevp</a>, <a href="op.html#variance">variance</a>, <a href="op.html#variance">variancep</a></li>
      <li><a href="op.html#corr">corr</a>, <a href="op.html#covariance">covariance</a>, <a href="op.html#covariancep">covariancep</a></li>
      <li><a href="op.html#array_agg">array_agg</a>, <a href="op.html#array_agg_distinct">array_agg_distinct</a>, <a href="op.html#object_agg">object_agg</a>, <a href="op.html#map_agg">map_agg</a>, <a href="op.html#entries_agg">entries_agg</a></li>
    </ul>
  </li>
  <li><a href="op.html#window-functions">Window Functions</a>
    <ul>
      <li><a href="op.html#row_number">row_number</a>, <a href="op.html#rank">rank</a>, <a href="op.html#avg_rank">avg_rank</a>, <a href="op.html#dense_rank">dense_rank</a></li>
      <li><a href="op.html#percent_rank">percent_rank</a>, <a href="op.html#cume_dist">cume_dist</a>, <a href="op.html#ntile">ntile</a></li>
      <li><a href="op.html#lag">lag</a>, <a href="op.html#lead">lead</a>, <a href="op.html#first_value">first_value</a>, <a href="op.html#last_value">last_value</a>, <a href="op.html#nth_value">nth_value</a></li>
      <li><a href="op.html#fill_down">fill_down</a>, <a href="op.html#fill_up">fill_up</a></li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h2 id="standard-functions"><a id="functions">Standard Functions</a></h2>

<p>Standard library of table expression functions. The <a href="https://idl.uw.edu/arquero/api/#op"><code class="language-plaintext highlighter-rouge">op</code> object</a> exports these as standard JavaScript functions that behave the same whether invoked inside or outside a table expression context.</p>

<h3 id="array-functions"><a id="array-functions">Array Functions</a></h3>

<hr />
<p><a id="compact" href="op.html#compact">#</a>
<em>op</em>.<b>compact</b>(<i>array</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/array.js">Source</a></p>

<p>Returns a new compacted array with invalid values (<code class="language-plaintext highlighter-rouge">null</code>, <code class="language-plaintext highlighter-rouge">undefined</code>, <code class="language-plaintext highlighter-rouge">NaN</code>) removed.</p>

<ul>
  <li><em>array</em>: The array to compact.</li>
</ul>

<p><em>Examples</em></p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">op</span><span class="p">.</span><span class="nx">compact</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="kc">NaN</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span> <span class="c1">// [ 1, 2, 3 ]</span>
</code></pre></div></div>

<hr />
<p><a id="concat" href="op.html#concat">#</a>
<em>op</em>.<b>concat</b>(<i>…values</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/array.js">Source</a></p>

<p>Merges two or more arrays in sequence, returning a new array.</p>

<ul>
  <li><em>values</em>: The arrays to merge.</li>
</ul>

<hr />
<p><a id="includes" href="op.html#includes">#</a>
<em>op</em>.<b>includes</b>(<i>array</i>, <i>value</i>[, <i>index</i>]) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/array.js">Source</a></p>

<p>Determines whether an <em>array</em> includes a certain <em>value</em> among its entries, returning <code class="language-plaintext highlighter-rouge">true</code> or <code class="language-plaintext highlighter-rouge">false</code> as appropriate.</p>

<ul>
  <li><em>array</em>: The input array value.</li>
  <li><em>value</em>: The value to search for.</li>
  <li><em>index</em>: The integer index to start searching from (default <code class="language-plaintext highlighter-rouge">0</code>).</li>
</ul>

<hr />
<p><a id="indexof" href="op.html#indexof">#</a>
<em>op</em>.<b>indexof</b>(<i>sequence</i>, <i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/array.js">Source</a></p>

<p>Returns the first index at which a given <em>value</em> can be found in the <em>sequence</em> (array or string), or -1 if it is not present.</p>

<ul>
  <li><em>sequence</em>: The input array or string value.</li>
  <li><em>value</em>: The value to search for.</li>
</ul>

<hr />
<p><a id="join" href="op.html#join">#</a>
<em>op</em>.<b>join</b>(<i>array</i>[, <i>delimiter</i>]) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/array.js">Source</a></p>

<p>Creates and returns a new string by concatenating all of the elements in an <em>array</em> (or an array-like object), separated by commas or a specified <em>delimiter</em> string. If the <em>array</em> has only one item, then that item will be returned without using the delimiter.</p>

<ul>
  <li><em>array</em>: The input array value.</li>
  <li><em>delimiter</em>: The delimiter string (default <code class="language-plaintext highlighter-rouge">','</code>).</li>
</ul>

<hr />
<p><a id="lastindexof" href="op.html#lastindexof">#</a>
<em>op</em>.<b>lastindexof</b>(<i>sequence</i>, <i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/array.js">Source</a></p>

<p>Returns the last index at which a given <em>value</em> can be found in the <em>sequence</em> (array or string), or -1 if it is not present.</p>

<ul>
  <li><em>sequence</em>: The input array or string value.</li>
  <li><em>value</em>: The value to search for.</li>
</ul>

<hr />
<p><a id="length" href="op.html#length">#</a>
<em>op</em>.<b>length</b>(<i>sequence</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/array.js">Source</a></p>

<p>Returns the length of the input <em>sequence</em> (array or string).</p>

<ul>
  <li><em>sequence</em>: The input array or string value.</li>
</ul>

<hr />
<p><a id="pluck" href="op.html#pluck">#</a>
<em>op</em>.<b>pluck</b>(<i>array</i>, <i>property</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/array.js">Source</a></p>

<p>Returns a new array in which the given <em>property</em> has been extracted for each element in the input <em>array</em>.</p>

<ul>
  <li><em>array</em>: The input array value.</li>
  <li><em>property</em>: The property name string to extract. Nested properties are not supported: the input <code class="language-plaintext highlighter-rouge">"a.b"</code> will indicates a property with that exact name, <em>not</em> a nested property <code class="language-plaintext highlighter-rouge">"b"</code> of the object <code class="language-plaintext highlighter-rouge">"a"</code>.</li>
</ul>

<hr />
<p><a id="reverse" href="op.html#reverse">#</a>
<em>op</em>.<b>reverse</b>(<i>sequence</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/array.js">Source</a></p>

<p>Returns a new array or string with the element order reversed: the first <em>sequence</em> element becomes the last, and the last <em>sequence</em> element becomes the first. The input <em>sequence</em> is unchanged.</p>

<ul>
  <li><em>sequence</em>: The input array or string value.</li>
</ul>

<hr />
<p><a id="sequence" href="op.html#sequence">#</a>
<em>op</em>.<b>sequence</b>([<i>start</i>,] <i>stop</i>[, <i>step</i>]) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/sequence.js">Source</a></p>

<p>Returns an array containing an arithmetic sequence from the <em>start</em> value to the <em>stop</em> value, in <em>step</em> increments. If <em>step</em> is positive, the last element is the largest <em>start + i * step</em> less than <em>stop</em>; if <em>step</em> is negative, the last element is the smallest <em>start + i * step</em> greater than <em>stop</em>. If the returned array would contain an infinite number of values, an empty range is returned.</p>

<ul>
  <li><em>start</em>: The starting value of the sequence (default <code class="language-plaintext highlighter-rouge">0</code>).</li>
  <li><em>stop</em>: The stopping value of the sequence. The stop value is exclusive; it is not included in the result.</li>
  <li><em>step</em>: The step increment between sequence values (default <code class="language-plaintext highlighter-rouge">1</code>).</li>
</ul>

<hr />
<p><a id="slice" href="op.html#slice">#</a>
<em>op</em>.<b>slice</b>(<i>sequence</i>[, <i>start</i>, <i>end</i>]) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/array.js">Source</a></p>

<p>Returns a copy of a portion of the input <em>sequence</em> (array or string) selected from <em>start</em> to <em>end</em> (<em>end</em> not included) where <em>start</em> and <em>end</em> represent the index of items in the sequence.</p>

<ul>
  <li><em>sequence</em>: The input array or string value.</li>
  <li><em>start</em>: The starting integer index to copy from (inclusive, default <code class="language-plaintext highlighter-rouge">0</code>).</li>
  <li><em>end</em>: The ending integer index to copy from (exclusive, default <code class="language-plaintext highlighter-rouge">sequence.length</code>).</li>
</ul>

<p><br /></p>

<h3 id="date-functions"><a id="date-functions">Date Functions</a></h3>

<hr />
<p><a id="now" href="op.html#now">#</a>
<em>op</em>.<b>now</b>() · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/date.js">Source</a></p>

<p>Returns the current time as the number of milliseconds elapsed since January 1, 1970 00:00:00 UTC.</p>

<hr />
<p><a id="timestamp" href="op.html#timestamp">#</a>
<em>op</em>.<b>timestamp</b>(<i>date</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/date.js">Source</a></p>

<p>Returns the timestamp for a <em>date</em> as the number of milliseconds elapsed since January 1, 1970 00:00:00 UTC.</p>

<ul>
  <li><em>date</em>: The input Date value.</li>
</ul>

<hr />
<p><a id="datetime" href="op.html#datetime">#</a>
<em>op</em>.<b>datetime</b>([<i>year</i>, <i>month</i>, <i>date</i>, <i>hours</i>, <i>minutes</i>, <i>seconds</i>, <i>milliseconds</i>]) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/date.js">Source</a></p>

<p>Creates and returns a new Date value. If no arguments are provided, the current date and time are used.</p>

<ul>
  <li><em>year</em>: The year.</li>
  <li><em>month</em> The (zero-based) month (default <code class="language-plaintext highlighter-rouge">0</code>).</li>
  <li><em>date</em> The date within the month (default <code class="language-plaintext highlighter-rouge">1</code>).</li>
  <li>hours: The hour within the day (default <code class="language-plaintext highlighter-rouge">0</code>).</li>
  <li><em>minutes</em>: The minute within the hour (default <code class="language-plaintext highlighter-rouge">0</code>).</li>
  <li><em>seconds</em>: The second within the minute (default <code class="language-plaintext highlighter-rouge">0</code>).</li>
  <li><em>milliseconds</em>: The milliseconds within the second (default <code class="language-plaintext highlighter-rouge">0</code>).</li>
</ul>

<hr />
<p><a id="year" href="op.html#year">#</a>
<em>op</em>.<b>year</b>(<i>date</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/date.js">Source</a></p>

<p>Returns the year of the specified <em>date</em> according to local time.</p>

<ul>
  <li><em>date</em>: The input Date or timestamp value.</li>
</ul>

<hr />
<p><a id="quarter" href="op.html#quarter">#</a>
<em>op</em>.<b>quarter</b>(<i>date</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/date.js">Source</a></p>

<p>Returns the zero-based quarter of the specified <em>date</em> according to local time.</p>

<ul>
  <li><em>date</em>: The input Date or timestamp value.</li>
</ul>

<hr />
<p><a id="month" href="op.html#month">#</a>
<em>op</em>.<b>month</b>(<i>date</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/date.js">Source</a></p>

<p>Returns the zero-based month of the specified <em>date</em> according to local time. A value of <code class="language-plaintext highlighter-rouge">0</code> indicates January, <code class="language-plaintext highlighter-rouge">1</code> indicates February, and so on.</p>

<ul>
  <li><em>date</em>: The input Date or timestamp value.</li>
</ul>

<hr />
<p><a id="week" href="op.html#week">#</a>
<em>op</em>.<b>week</b>(<i>date</i>[, <i>firstday</i>]) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/date.js">Source</a></p>

<p>Returns the week number of the year (0-53) for the specified <em>date</em> according to local time. By default, Sunday is used as the first day of the week. All days in a new year preceding the first Sunday are considered to be in week 0.</p>

<ul>
  <li><em>date</em>: The input Date or timestamp value.</li>
  <li><em>firstday</em>: Number of first day of the week (default <code class="language-plaintext highlighter-rouge">0</code> for Sunday, <code class="language-plaintext highlighter-rouge">1</code> for Monday and so on).</li>
</ul>

<hr />
<p><a id="date" href="op.html#date">#</a>
<em>op</em>.<b>date</b>(<i>date</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/date.js">Source</a></p>

<p>Returns the date (day of month) of the specified <em>date</em> according to local time.</p>

<ul>
  <li><em>date</em>: The input Date or timestamp value.</li>
</ul>

<hr />
<p><a id="dayofyear" href="op.html#dayofyear">#</a>
<em>op</em>.<b>dayofyear</b>(<i>date</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/date.js">Source</a></p>

<p>Returns the day of the year (1-366) of the specified <em>date</em> according to local time.</p>

<ul>
  <li><em>date</em>: The input Date or timestamp value.</li>
</ul>

<hr />
<p><a id="dayofweek" href="op.html#dayofweek">#</a>
<em>op</em>.<b>dayofweek</b>(<i>date</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/date.js">Source</a></p>

<p>Returns the Sunday-based day of the week (0-6) of the specified <em>date</em> according to local time. A value of <code class="language-plaintext highlighter-rouge">0</code> indicates Sunday, <code class="language-plaintext highlighter-rouge">1</code> indicates Monday, and so on.</p>

<ul>
  <li><em>date</em>: The input Date or timestamp value.</li>
</ul>

<hr />
<p><a id="hours" href="op.html#hours">#</a>
<em>op</em>.<b>hours</b>(<i>date</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/date.js">Source</a></p>

<p>Returns the hour of the day for the specified <em>date</em> according to local time.</p>

<ul>
  <li><em>date</em>: The input Date or timestamp value.</li>
</ul>

<hr />
<p><a id="minutes" href="op.html#minutes">#</a>
<em>op</em>.<b>minutes</b>(<i>date</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/date.js">Source</a></p>

<p>Returns the minute of the hour for the specified <em>date</em> according to local time.</p>

<ul>
  <li><em>date</em>: The input Date or timestamp value.</li>
</ul>

<hr />
<p><a id="seconds" href="op.html#seconds">#</a>
<em>op</em>.<b>seconds</b>(<i>date</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/date.js">Source</a></p>

<p>Returns the seconds of the minute for the specified <em>date</em> according to local time.</p>

<ul>
  <li><em>date</em>: The input Date or timestamp value.</li>
</ul>

<hr />
<p><a id="milliseconds" href="op.html#milliseconds">#</a>
<em>op</em>.<b>milliseconds</b>(<i>date</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/date.js">Source</a></p>

<p>Returns the milliseconds of the second for the specified <em>date</em> according to local time.</p>

<ul>
  <li><em>date</em>: The input Date or timestamp value.</li>
</ul>

<hr />
<p><a id="utcdatetime" href="op.html#utcdatetime">#</a>
<em>op</em>.<b>utcdatetime</b>([<i>year</i>, <i>month</i>, <i>date</i>, <i>hours</i>, <i>minutes</i>, <i>seconds</i>, <i>milliseconds</i>]) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/date.js">Source</a></p>

<p>Creates and returns a new Date value using <a href="https://en.wikipedia.org/wiki/Coordinated_Universal_Time">Coordinated Universal Time (UTC)</a>. If no arguments are provided, the current date and time are used.</p>

<ul>
  <li><em>year</em>: The year.</li>
  <li><em>month</em> The (zero-based) month (default <code class="language-plaintext highlighter-rouge">0</code>).</li>
  <li><em>date</em> The date within the month (default <code class="language-plaintext highlighter-rouge">1</code>).</li>
  <li>hours: The hour within the day (default <code class="language-plaintext highlighter-rouge">0</code>).</li>
  <li><em>minutes</em>: The minute within the hour (default <code class="language-plaintext highlighter-rouge">0</code>).</li>
  <li><em>seconds</em>: The second within the minute (default <code class="language-plaintext highlighter-rouge">0</code>).</li>
  <li><em>milliseconds</em>: The milliseconds within the second (default <code class="language-plaintext highlighter-rouge">0</code>).</li>
</ul>

<hr />
<p><a id="utcyear" href="op.html#utcyear">#</a>
<em>op</em>.<b>utcyear</b>(<i>date</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/date.js">Source</a></p>

<p>Returns the year of the specified <em>date</em> according to <a href="https://en.wikipedia.org/wiki/Coordinated_Universal_Time">Coordinated Universal Time (UTC)</a>.</p>

<ul>
  <li><em>date</em>: The input Date or timestamp value.</li>
</ul>

<hr />
<p><a id="utcquarter" href="op.html#utcquarter">#</a>
<em>op</em>.<b>utcquarter</b>(<i>date</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/date.js">Source</a></p>

<p>Returns the zero-based quarter of the specified <em>date</em> according to <a href="https://en.wikipedia.org/wiki/Coordinated_Universal_Time">Coordinated Universal Time (UTC)</a>.</p>

<ul>
  <li><em>date</em>: The input Date or timestamp value.</li>
</ul>

<hr />
<p><a id="utcmonth" href="op.html#utcmonth">#</a>
<em>op</em>.<b>utcmonth</b>(<i>date</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/date.js">Source</a></p>

<p>Returns the zero-based month of the specified <em>date</em> according to <a href="https://en.wikipedia.org/wiki/Coordinated_Universal_Time">Coordinated Universal Time (UTC)</a>. A value of <code class="language-plaintext highlighter-rouge">0</code> indicates January, <code class="language-plaintext highlighter-rouge">1</code> indicates February, and so on.</p>

<ul>
  <li><em>date</em>: The input Date or timestamp value.</li>
</ul>

<hr />
<p><a id="utcweek" href="op.html#utcweek">#</a>
<em>op</em>.<b>utcweek</b>(<i>date</i>[, <i>firstday</i>]) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/date.js">Source</a></p>

<p>Returns the week number of the year (0-53) for the specified <em>date</em> according to <a href="https://en.wikipedia.org/wiki/Coordinated_Universal_Time">Coordinated Universal Time (UTC)</a>. By default, Sunday is used as the first day of the week. All days in a new year preceding the first Sunday are considered to be in week 0.</p>

<ul>
  <li><em>date</em>: The input Date or timestamp value.</li>
  <li><em>firstday</em>: Number of first day of the week (default <code class="language-plaintext highlighter-rouge">0</code> for Sunday, <code class="language-plaintext highlighter-rouge">1</code> for Monday and so on).</li>
</ul>

<hr />
<p><a id="utcdate" href="op.html#utcdate">#</a>
<em>op</em>.<b>utcdate</b>(<i>date</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/date.js">Source</a></p>

<p>Returns the date (day of month) of the specified <em>date</em> according to <a href="https://en.wikipedia.org/wiki/Coordinated_Universal_Time">Coordinated Universal Time (UTC)</a>.</p>

<ul>
  <li><em>date</em>: The input Date or timestamp value.</li>
</ul>

<hr />
<p><a id="utcdayofyear" href="op.html#utcdayofyear">#</a>
<em>op</em>.<b>utcdayofyear</b>(<i>date</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/date.js">Source</a></p>

<p>Returns the day of the year (1-366) of the specified <em>date</em> according to <a href="https://en.wikipedia.org/wiki/Coordinated_Universal_Time">Coordinated Universal Time (UTC)</a>.</p>

<ul>
  <li><em>date</em>: The input Date or timestamp value.</li>
</ul>

<hr />
<p><a id="utcdayofweek" href="op.html#utcdayofweek">#</a>
<em>op</em>.<b>utcdayofweek</b>(<i>date</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/date.js">Source</a></p>

<p>Returns the Sunday-based day of the week (0-6) of the specified <em>date</em> according to <a href="https://en.wikipedia.org/wiki/Coordinated_Universal_Time">Coordinated Universal Time (UTC)</a>. A value of <code class="language-plaintext highlighter-rouge">0</code> indicates Sunday, <code class="language-plaintext highlighter-rouge">1</code> indicates Monday, and so on.</p>

<ul>
  <li><em>date</em>: The input Date or timestamp value.</li>
</ul>

<hr />
<p><a id="utchours" href="op.html#utchours">#</a>
<em>op</em>.<b>utchours</b>(<i>date</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/date.js">Source</a></p>

<p>Returns the hour of the day for the specified <em>date</em> according to <a href="https://en.wikipedia.org/wiki/Coordinated_Universal_Time">Coordinated Universal Time (UTC)</a>.</p>

<ul>
  <li><em>date</em>: The input Date or timestamp value.</li>
</ul>

<hr />
<p><a id="utcminutes" href="op.html#utcminutes">#</a>
<em>op</em>.<b>utcminutes</b>(<i>date</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/date.js">Source</a></p>

<p>Returns the minute of the hour for the specified <em>date</em> according to <a href="https://en.wikipedia.org/wiki/Coordinated_Universal_Time">Coordinated Universal Time (UTC)</a>.</p>

<ul>
  <li><em>date</em>: The input Date or timestamp value.</li>
</ul>

<hr />
<p><a id="utcseconds" href="op.html#utcseconds">#</a>
<em>op</em>.<b>utcseconds</b>(<i>date</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/date.js">Source</a></p>

<p>Returns the seconds of the minute for the specified <em>date</em> according to <a href="https://en.wikipedia.org/wiki/Coordinated_Universal_Time">Coordinated Universal Time (UTC)</a>.</p>

<ul>
  <li><em>date</em>: The input Date or timestamp value.</li>
</ul>

<hr />
<p><a id="utcmilliseconds" href="op.html#utcmilliseconds">#</a>
<em>op</em>.<b>utcmilliseconds</b>(<i>date</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/date.js">Source</a></p>

<p>Returns the milliseconds of the second for the specified <em>date</em> according to <a href="https://en.wikipedia.org/wiki/Coordinated_Universal_Time">Coordinated Universal Time (UTC)</a>.</p>

<ul>
  <li><em>date</em>: The input Date or timestamp value.</li>
</ul>

<hr />
<p><a id="format_date" href="op.html#format_date">#</a>
<em>op</em>.<b>format_date</b>(<i>date</i>[, <i>shorten</i>]) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/date.js">Source</a></p>

<p>Returns an <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a> formatted string for the given <em>date</em> in local timezone. The resulting string is compatible with <a href="op.html#parse_date">parse_date</a> and JavaScript’s built-in <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse">Date.parse</a>.</p>

<ul>
  <li><em>date</em>: The input Date or timestamp value.</li>
  <li><em>shorten</em>: A boolean flag (default <code class="language-plaintext highlighter-rouge">false</code>) indicating if the formatted string should be shortened if possible. For example, the local date <code class="language-plaintext highlighter-rouge">2001-01-01</code> will shorten from <code class="language-plaintext highlighter-rouge">"2001-01-01T00:00:00.000"</code> to <code class="language-plaintext highlighter-rouge">"2001-01-01T00:00"</code>.</li>
</ul>

<hr />
<p><a id="format_utcdate" href="op.html#format_utcdate">#</a>
<em>op</em>.<b>format_utcdate</b>(<i>date</i>[, <i>shorten</i>]) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/date.js">Source</a></p>

<p>Returns an <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a> formatted string for the given <em>date</em> in <a href="https://en.wikipedia.org/wiki/Coordinated_Universal_Time">Coordinated Universal Time (UTC)</a>. The resulting string is compatible with <a href="op.html#parse_date">parse_date</a> and JavaScript’s built-in <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse">Date.parse</a>.</p>

<ul>
  <li><em>date</em>: The input Date or timestamp value.</li>
  <li><em>shorten</em>: A boolean flag (default <code class="language-plaintext highlighter-rouge">false</code>) indicating if the formatted string should be shortened if possible. For example, the UTC date <code class="language-plaintext highlighter-rouge">2001-01-01</code> will shorten from <code class="language-plaintext highlighter-rouge">"2001-01-01T00:00:00.000Z"</code> to <code class="language-plaintext highlighter-rouge">"2001-01-01"</code>.</li>
</ul>

<p><br /></p>

<h3 id="json-functions"><a id="json-functions">JSON Functions</a></h3>

<p>Functions for parsing and generating strings formatted using <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON">JavaScript Object Notation (JSON)</a>.</p>

<hr />
<p><a id="parse_json" href="op.html#parse_json">#</a>
<em>op</em>.<b>parse_json</b>(<i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/json.js">Source</a></p>

<p>Parses a string <em>value</em> in <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON">JSON</a> format, constructing the JavaScript value or object described by the string.</p>

<ul>
  <li><em>value</em>: The input string value.</li>
</ul>

<hr />
<p><a id="to_json" href="op.html#to_json">#</a>
<em>op</em>.<b>to_json</b>(<i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/json.js">Source</a></p>

<p>Converts a JavaScript object or value to a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON">JSON</a> string.</p>

<ul>
  <li><em>value</em>: The value to convert to a JSON string.</li>
</ul>

<p><br /></p>

<h3 id="math-functions"><a id="math-functions">Math Functions</a></h3>

<hr />
<p><a id="bin" href="op.html#bin">#</a>
<em>op</em>.<b>bin</b>(<i>value</i>, <i>min</i>, <i>max</i>, <i>step</i>[, <i>offset</i>]) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/bin.js">Source</a></p>

<p>Truncate a <em>value</em> to a bin boundary. Useful for creating equal-width histograms. Values outside the <code class="language-plaintext highlighter-rouge">[min, max]</code> range will be mapped to <code class="language-plaintext highlighter-rouge">-Infinity</code> (<em>value &lt; min</em>) or <code class="language-plaintext highlighter-rouge">+Infinity</code> (<em>value &gt; max</em>).</p>

<ul>
  <li><em>value</em>: The number value to bin.</li>
  <li><em>min</em>: The minimum bin boundary value.</li>
  <li><em>max</em>: The maximum bin boundary value.</li>
  <li><em>step</em>: The step size between bin boundaries.</li>
  <li><em>offset</em>: Offset in steps (default <code class="language-plaintext highlighter-rouge">0</code>) by which to adjust the returned bin value. An offset of <code class="language-plaintext highlighter-rouge">1</code> returns the next boundary.</li>
</ul>

<hr />
<p><a id="random" href="op.html#random">#</a>
<em>op</em>.<b>random</b>() · <a href="https://github.com/uwdata/arquero/blob/master/src/util/random.js">Source</a></p>

<p>Return a random floating point number between 0 (inclusive) and 1 (exclusive). By default uses <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random">Math.random</a>. Use the <a href="https://idl.uw.edu/arquero/api/#seed">seed</a> method to instead use a seeded random number generator.</p>

<hr />
<p><a id="is_nan" href="op.html#is_nan">#</a>
<em>op</em>.<b>is_nan</b>(<i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/math.js">Source</a></p>

<p>Tests if the input <em>value</em> is not a number (<code class="language-plaintext highlighter-rouge">NaN</code>); equivalent to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isNaN">Number.isNaN</a>. The method will return <code class="language-plaintext highlighter-rouge">true</code> only if the input <em>value</em> is an actual numeric <code class="language-plaintext highlighter-rouge">NaN</code> value; it will return <code class="language-plaintext highlighter-rouge">false</code> for other types (booleans, strings, <em>etc</em>.).</p>

<ul>
  <li><em>value</em>: The value to test.</li>
</ul>

<p><em>Examples</em></p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">op</span><span class="p">.</span><span class="nx">is_nan</span><span class="p">(</span><span class="kc">NaN</span><span class="p">)</span> <span class="c1">// true</span>
<span class="nx">op</span><span class="p">.</span><span class="nx">is_nan</span><span class="p">(</span><span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="p">)</span> <span class="c1">// true</span>
<span class="nx">op</span><span class="p">.</span><span class="nx">is_nan</span><span class="p">(</span><span class="nx">op</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span> <span class="c1">// true</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">op</span><span class="p">.</span><span class="nx">is_nan</span><span class="p">(</span><span class="dl">'</span><span class="s1">foo</span><span class="dl">'</span><span class="p">)</span> <span class="c1">// false</span>
<span class="nx">op</span><span class="p">.</span><span class="nx">is_nan</span><span class="p">(</span><span class="o">+</span><span class="dl">'</span><span class="s1">foo</span><span class="dl">'</span><span class="p">)</span> <span class="c1">// true, coerce to number first</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">op</span><span class="p">.</span><span class="nx">is_nan</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="c1">// false</span>
<span class="nx">op</span><span class="p">.</span><span class="nx">is_nan</span><span class="p">(</span><span class="o">+</span><span class="kc">true</span><span class="p">)</span> <span class="c1">// false, booleans coerce to numbers</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">op</span><span class="p">.</span><span class="nx">is_nan</span><span class="p">(</span><span class="kc">undefined</span><span class="p">)</span> <span class="c1">// false</span>
<span class="nx">op</span><span class="p">.</span><span class="nx">is_nan</span><span class="p">(</span><span class="o">+</span><span class="kc">undefined</span><span class="p">)</span> <span class="c1">// true, coerce to number first</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">op</span><span class="p">.</span><span class="nx">is_nan</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span> <span class="c1">// false</span>
<span class="nx">op</span><span class="p">.</span><span class="nx">is_nan</span><span class="p">(</span><span class="o">+</span><span class="kc">null</span><span class="p">)</span> <span class="c1">// false, null coerces to zero</span>
</code></pre></div></div>

<hr />
<p><a id="is_finite" href="op.html#is_finite">#</a>
<em>op</em>.<b>is_finite</b>(<i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/math.js">Source</a></p>

<p>Tests if the input <em>value</em> is finite; equivalent to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isFinite">Number.isFinite</a>.</p>

<ul>
  <li><em>value</em>: The value to test.</li>
</ul>

<hr />
<p><a id="abs" href="op.html#abs">#</a>
<em>op</em>.<b>abs</b>(<i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/math.js">Source</a></p>

<p>Returns the absolute value of the input <em>value</em>; equivalent to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/abs">Math.abs</a>.</p>

<ul>
  <li><em>value</em>: The input number value.</li>
</ul>

<hr />
<p><a id="cbrt" href="op.html#cbrt">#</a>
<em>op</em>.<b>cbrt</b>(<i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/math.js">Source</a></p>

<p>Returns the cube root value of the input <em>value</em>; equivalent to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/cbrt">Math.cbrt</a>.</p>

<ul>
  <li><em>value</em>: The input number value.</li>
</ul>

<hr />
<p><a id="ceil" href="op.html#ceil">#</a>
<em>op</em>.<b>ceil</b>(<i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/math.js">Source</a></p>

<p>Returns the ceiling of the input <em>value</em>, the nearest integer equal to or greater than the input; equivalent to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/ceil">Math.ceil</a>.</p>

<ul>
  <li><em>value</em>: The input number value.</li>
</ul>

<hr />
<p><a id="clz32" href="op.html#clz32">#</a>
<em>op</em>.<b>clz32</b>(<i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/math.js">Source</a></p>

<p>Returns the number of leading zero bits in the 32-bit binary representation of a number <em>value</em>; equivalent to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/clz32">Math.clz32</a>.</p>

<ul>
  <li><em>value</em>: The input number value.</li>
</ul>

<hr />
<p><a id="exp" href="op.html#exp">#</a>
<em>op</em>.<b>exp</b>(<i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/math.js">Source</a></p>

<p>Returns <em>e<sup>value</sup></em>, where <em>e</em> is Euler’s number, the base of the natural logarithm; equivalent to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/exp">Math.exp</a>.</p>

<ul>
  <li><em>value</em>: The input number value.</li>
</ul>

<hr />
<p><a id="expm1" href="op.html#expm1">#</a>
<em>op</em>.<b>expm1</b>(<i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/math.js">Source</a></p>

<p>Returns <em>e<sup>value</sup> - 1</em>, where <em>e</em> is Euler’s number, the base of the natural logarithm; equivalent to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/expm1">Math.expm1</a>.</p>

<ul>
  <li><em>value</em>: The input number value.</li>
</ul>

<hr />
<p><a id="floor" href="op.html#floor">#</a>
<em>op</em>.<b>floor</b>(<i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/math.js">Source</a></p>

<p>Returns the floor of the input <em>value</em>, the nearest integer equal to or less than the input; equivalent to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/floor">Math.floor</a>.</p>

<ul>
  <li><em>value</em>: The input number value.</li>
</ul>

<hr />
<p><a id="fround" href="op.html#fround">#</a>
<em>op</em>.<b>fround</b>(<i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/math.js">Source</a></p>

<p>Returns the nearest 32-bit single precision float representation of the input number <em>value</em>; equivalent to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/fround">Math.fround</a>. Useful for translating between 64-bit <code class="language-plaintext highlighter-rouge">Number</code> values and values from a <code class="language-plaintext highlighter-rouge">Float32Array</code>.</p>

<ul>
  <li><em>value</em>: The input number value.</li>
</ul>

<hr />
<p><a id="greatest" href="op.html#greatest">#</a>
<em>op</em>.<b>greatest</b>(<i>…values</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/math.js">Source</a></p>

<p>Returns the greatest (maximum) value among the input <em>values</em>; equivalent to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/max">Math.max</a>. This is <em>not</em> an aggregate function, see <a href="op.html#max">op.max</a> to compute a maximum value across multiple rows.</p>

<ul>
  <li><em>values</em>: Zero or more input values.</li>
</ul>

<hr />
<p><a id="least" href="op.html#least">#</a>
<em>op</em>.<b>least</b>(<i>…values</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/math.js">Source</a></p>

<p>Returns the least (minimum) value among the input <em>values</em>; equivalent to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/min">Math.min</a>. This is <em>not</em> an aggregate function, see <a href="op.html#min">op.min</a> to compute a minimum value across multiple rows.</p>

<ul>
  <li><em>values</em>: Zero or more input values.</li>
</ul>

<hr />
<p><a id="log" href="op.html#log">#</a>
<em>op</em>.<b>log</b>(<i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/math.js">Source</a></p>

<p>Returns the natural logarithm (base <em>e</em>) of a number <em>value</em>; equivalent to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/log">Math.log</a>.</p>

<ul>
  <li><em>value</em>: The input number value.</li>
</ul>

<hr />
<p><a id="log10" href="op.html#log10">#</a>
<em>op</em>.<b>log10</b>(<i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/math.js">Source</a></p>

<p>Returns the base 10 logarithm of a number <em>value</em>; equivalent to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/log10">Math.log10</a>.</p>

<ul>
  <li><em>value</em>: The input number value.</li>
</ul>

<hr />
<p><a id="log1p" href="op.html#log1p">#</a>
<em>op</em>.<b>log1p</b>(<i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/math.js">Source</a></p>

<p>Returns the natural logarithm (base <em>e</em>) of 1 + a number <em>value</em>; equivalent to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/log1p">Math.log1p</a>.</p>

<ul>
  <li><em>value</em>: The input number value.</li>
</ul>

<hr />
<p><a id="log2" href="op.html#log2">#</a>
<em>op</em>.<b>log2</b>(<i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/math.js">Source</a></p>

<p>Returns the base 2 logarithm of a number <em>value</em>; equivalent to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/log2">Math.log2</a>.</p>

<ul>
  <li><em>value</em>: The input number value.</li>
</ul>

<hr />
<p><a id="pow" href="op.html#pow">#</a>
<em>op</em>.<b>pow</b>(<i>base</i>, <i>exponent</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/math.js">Source</a></p>

<p>Returns the <em>base</em> raised to the <em>exponent</em> power, that is, <em>base</em><sup><em>exponent</em></sup>; equivalent to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/pow">Math.pow</a>.</p>

<ul>
  <li><em>base</em>: The base number value.</li>
  <li><em>exponent</em>: The exponent number value.</li>
</ul>

<hr />
<p><a id="round" href="op.html#round">#</a>
<em>op</em>.<b>round</b>(<i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/math.js">Source</a></p>

<p>Returns the value of a number rounded to the nearest integer; ; equivalent to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/round">Math.round</a>.</p>

<ul>
  <li><em>value</em>: The input number value.</li>
</ul>

<hr />
<p><a id="sign" href="op.html#sign">#</a>
<em>op</em>.<b>sign</b>(<i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/math.js">Source</a></p>

<p>Returns either a positive or negative +/- 1, indicating the sign of the input <em>value</em>; equivalent to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign">Math.sign</a>.</p>

<ul>
  <li><em>value</em>: The input number value.</li>
</ul>

<hr />
<p><a id="sqrt" href="op.html#sqrt">#</a>
<em>op</em>.<b>sqrt</b>(<i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/math.js">Source</a></p>

<p>Returns the square root of the input <em>value</em>; equivalent to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sqrt">Math.sqrt</a>.</p>

<ul>
  <li><em>value</em>: The input number value.</li>
</ul>

<hr />
<p><a id="trunc" href="op.html#trunc">#</a>
<em>op</em>.<b>trunc</b>(<i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/math.js">Source</a></p>

<p>Returns the integer part of a number by removing any fractional digits; equivalent to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/trunc">Math.trunc</a>.</p>

<ul>
  <li><em>value</em>: The input number value.</li>
</ul>

<hr />
<p><a id="degrees" href="op.html#degrees">#</a>
<em>op</em>.<b>degrees</b>(<i>radians</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/math.js">Source</a></p>

<p>Converts the input <em>radians</em> value to degrees.</p>

<ul>
  <li><em>value</em>: The input number value in radians.</li>
</ul>

<hr />
<p><a id="radians" href="op.html#radians">#</a>
<em>op</em>.<b>radians</b>(<i>radians</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/math.js">Source</a></p>

<p>Converts the input <em>degrees</em> value to radians.</p>

<ul>
  <li><em>value</em>: The input number value in degrees.</li>
</ul>

<hr />
<p><a id="acos" href="op.html#acos">#</a>
<em>op</em>.<b>acos</b>(<i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/math.js">Source</a></p>

<p>Returns the arc-cosine (in radians) of a number <em>value</em>; equivalent to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/acos">Math.acos</a>.</p>

<ul>
  <li><em>value</em>: The input number value.</li>
</ul>

<hr />
<p><a id="acosh" href="op.html#acosh">#</a>
<em>op</em>.<b>acosh</b>(<i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/math.js">Source</a></p>

<p>Returns the hyperbolic arc-cosine of a number <em>value</em>; equivalent to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/acosh">Math.acosh</a>.</p>

<ul>
  <li><em>value</em>: The input number value.</li>
</ul>

<hr />
<p><a id="asin" href="op.html#asin">#</a>
<em>op</em>.<b>asin</b>(<i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/math.js">Source</a></p>

<p>Returns the arc-sine (in radians) of a number <em>value</em>; equivalent to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/asin">Math.asin</a>.</p>

<ul>
  <li><em>value</em>: The input number value.</li>
</ul>

<hr />
<p><a id="asinh" href="op.html#asinh">#</a>
<em>op</em>.<b>asinh</b>(<i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/math.js">Source</a></p>

<p>Returns the hyperbolic arc-sine of a number <em>value</em>; equivalent to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/asinh">Math.asinh</a>.</p>

<ul>
  <li><em>value</em>: The input number value.</li>
</ul>

<hr />
<p><a id="atan" href="op.html#atan">#</a>
<em>op</em>.<b>atan</b>(<i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/math.js">Source</a></p>

<p>Returns the arc-tangent (in radians) of a number <em>value</em>; equivalent to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/atan">Math.atan</a>.</p>

<ul>
  <li><em>value</em>: The input number value.</li>
</ul>

<hr />
<p><a id="atan2" href="op.html#atan2">#</a>
<em>op</em>.<b>atan2</b>(<i>y</i>, <i>x</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/math.js">Source</a></p>

<p>Returns the angle in the plane (in radians) between the positive x-axis and the ray from (0, 0) to the point (<em>x</em>, <em>y</em>); ; equivalent to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/atan2">Math.atan2</a>.</p>

<ul>
  <li><em>y</em>: The y coordinate of the point.</li>
  <li><em>x</em>: The x coordinate of the point.</li>
</ul>

<hr />
<p><a id="atanh" href="op.html#atanh">#</a>
<em>op</em>.<b>atanh</b>(<i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/math.js">Source</a></p>

<p>Returns the hyperbolic arc-tangent of a number <em>value</em>; equivalent to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/atanh">Math.atanh</a>.</p>

<ul>
  <li><em>value</em>: The input number value.</li>
</ul>

<hr />
<p><a id="cos" href="op.html#cos">#</a>
<em>op</em>.<b>cos</b>(<i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/math.js">Source</a></p>

<p>Returns the cosine (in radians) of a number <em>value</em>; equivalent to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/cos">Math.cos</a>.</p>

<ul>
  <li><em>value</em>: The input number value.</li>
</ul>

<hr />
<p><a id="cosh" href="op.html#cosh">#</a>
<em>op</em>.<b>cosh</b>(<i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/math.js">Source</a></p>

<p>Returns the hyperbolic cosine of a number <em>value</em>; equivalent to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/cosh">Math.cosh</a>.</p>

<ul>
  <li><em>value</em>: The input number value.</li>
</ul>

<hr />
<p><a id="sin" href="op.html#sin">#</a>
<em>op</em>.<b>sin</b>(<i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/math.js">Source</a></p>

<p>Returns the sine (in radians) of a number <em>value</em>; equivalent to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sin">Math.sin</a>.</p>

<ul>
  <li><em>value</em>: The input number value.</li>
</ul>

<hr />
<p><a id="sinh" href="op.html#sinh">#</a>
<em>op</em>.<b>sinh</b>(<i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/math.js">Source</a></p>

<p>Returns the hyperbolic sine of a number <em>value</em>; equivalent to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sinh">Math.sinh</a>.</p>

<ul>
  <li><em>value</em>: The input number value.</li>
</ul>

<hr />
<p><a id="tan" href="op.html#tan">#</a>
<em>op</em>.<b>tan</b>(<i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/math.js">Source</a></p>

<p>Returns the tangent (in radians) of a number <em>value</em>; equivalent to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/tan">Math.tan</a>.</p>

<ul>
  <li><em>value</em>: The input number value.</li>
</ul>

<hr />
<p><a id="tanh" href="op.html#tanh">#</a>
<em>op</em>.<b>tanh</b>(<i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/math.js">Source</a></p>

<p>Returns the hyperbolic tangent of a number <em>value</em>; equivalent to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/tanh">Math.tanh</a>.</p>

<ul>
  <li><em>value</em>: The input number value.</li>
</ul>

<p><br /></p>

<h3 id="object-functions"><a id="object-functions">Object Functions</a></h3>

<hr />
<p><a id="equal" href="op.html#equal">#</a>
<em>op</em>.<b>equal</b>(<i>a</i>, <i>b</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/equal.js">Source</a></p>

<p>Compare two values for equality, using join semantics in which <code class="language-plaintext highlighter-rouge">null !== null</code>. If the inputs are object-valued, a deep equality check of array entries or object key-value pairs is performed. The method is helpful within custom <a href="https://idl.uw.edu/arquero/api/verbs/#join">join</a> condition expressions.</p>

<ul>
  <li><em>a</em>: The first input to compare.</li>
  <li><em>b</em>: The second input to compare.</li>
</ul>

<hr />
<p><a id="has" href="op.html#has">#</a>
<em>op</em>.<b>has</b>(<i>object</i>, <i>key</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/object.js">Source</a></p>

<p>Returns a boolean indicating whether the <em>object</em> has the specified <em>key</em> as its own property (as opposed to inheriting it). If the <em>object</em> is a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map">Map</a> or <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set">Set</a> instance, the <code class="language-plaintext highlighter-rouge">has</code> method will be invoked directly on the object, otherwise <code class="language-plaintext highlighter-rouge">Object.hasOwnProperty</code> is used.</p>

<ul>
  <li><em>object</em>: The object, Map, or Set to test for property membership.</li>
  <li><em>key</em>: The string key (property name) to test for.</li>
</ul>

<hr />
<p><a id="keys" href="op.html#keys">#</a>
<em>op</em>.<b>keys</b>(<i>object</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/object.js">Source</a></p>

<p>Returns an array of a given <em>object</em>’s own enumerable property names. If the <em>object</em> is a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map">Map</a> instance, the <code class="language-plaintext highlighter-rouge">keys</code> method will be invoked directly on the object, otherwise <code class="language-plaintext highlighter-rouge">Object.keys</code> is used.</p>

<ul>
  <li><em>object</em>: The input object or Map value.</li>
</ul>

<hr />
<p><a id="values" href="op.html#values">#</a>
<em>op</em>.<b>values</b>(<i>object</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/object.js">Source</a></p>

<p>Returns an array of a given <em>object</em>’s own enumerable property values. If the <em>object</em> is a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map">Map</a> or <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set">Set</a> instance, the <code class="language-plaintext highlighter-rouge">values</code> method will be invoked directly on the object, otherwise <code class="language-plaintext highlighter-rouge">Object.values</code> is used.</p>

<ul>
  <li><em>object</em>: The input object, Map, or Set value.</li>
</ul>

<hr />
<p><a id="entries" href="op.html#entries">#</a>
<em>op</em>.<b>entries</b>(<i>object</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/object.js">Source</a></p>

<p>Returns an array of a given <em>object</em>’s own enumerable string-keyed property <code class="language-plaintext highlighter-rouge">[key, value]</code> pairs. If the <em>object</em> is a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map">Map</a> or <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set">Set</a> instance, the <code class="language-plaintext highlighter-rouge">entries</code> method will be invoked directly on the object, otherwise <code class="language-plaintext highlighter-rouge">Object.entries</code> is used.</p>

<ul>
  <li><em>object</em>: The input object, Map, or Set value.</li>
</ul>

<hr />
<p><a id="object" href="op.html#object">#</a>
<em>op</em>.<b>object</b>(<i>entries</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/object.js">Source</a></p>

<p>Returns a new object given an iterable <em>entries</em> argument of <code class="language-plaintext highlighter-rouge">[key, value]</code> pairs. This method is Arquero’s version of the standard <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/fromEntries">Object.fromEntries</a> method.</p>

<ul>
  <li><em>entries</em>: An iterable collection of <code class="language-plaintext highlighter-rouge">[key, value]</code> pairs, such as an array of two-element arrays or a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map">Map</a>.</li>
</ul>

<hr />
<p><a id="recode" href="op.html#recode">#</a>
<em>op</em>.<b>recode</b>(<i>value</i>, <i>map</i>[, <i>fallback</i>]) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/recode.js">Source</a></p>

<p>Recodes an input <em>value</em> to an alternative value, based on a provided value <em>map</em> object. If a <em>fallback</em> value is specified, it will be returned when the input value is not found in the map; otherwise, the input value is returned unchanged.</p>

<ul>
  <li><em>value</em>: The value to recode. The value must be safely coercible to a string for lookup against the value map.</li>
  <li><em>map</em>: An object or <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map">Map</a> with input values for keys and recoded values for values. If a non-Map object, only the object’s own properties will be considered; inherited properties on the prototype chain are ignored.</li>
  <li><em>fallback</em>: An optional fallback value to use if the input value is not found in the value map. If a fallback is not specified, the input value will be returned unchanged when not found in the map.</li>
</ul>

<p><em>Examples</em></p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// recode values in a derive statement</span>
<span class="nx">table</span><span class="p">.</span><span class="nx">derive</span><span class="p">({</span> <span class="na">val</span><span class="p">:</span> <span class="nx">d</span> <span class="o">=&gt;</span> <span class="nx">op</span><span class="p">.</span><span class="nx">recode</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">val</span><span class="p">,</span> <span class="p">{</span> <span class="dl">'</span><span class="s1">opt:a</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">A</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">opt:b</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">B</span><span class="dl">'</span> <span class="p">})</span> <span class="p">})</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// define value map externally, bind as parameter</span>
<span class="kd">const</span> <span class="nx">map</span> <span class="o">=</span> <span class="p">{</span> <span class="dl">'</span><span class="s1">opt:a</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">A</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">opt:b</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">B</span><span class="dl">'</span> <span class="p">};</span>
<span class="nx">table</span>
  <span class="p">.</span><span class="nx">params</span><span class="p">({</span> <span class="nx">map</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">derive</span><span class="p">({</span> <span class="na">val</span><span class="p">:</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">$</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">op</span><span class="p">.</span><span class="nx">recode</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">val</span><span class="p">,</span> <span class="nx">$</span><span class="p">.</span><span class="nx">map</span><span class="p">,</span> <span class="dl">'</span><span class="s1">?</span><span class="dl">'</span><span class="p">)</span> <span class="p">})</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// using a Map object, bind as parameter</span>
<span class="kd">const</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">().</span><span class="kd">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">opt:a</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">A</span><span class="dl">'</span><span class="p">).</span><span class="kd">set</span><span class="p">(</span><span class="dl">'</span><span class="s1">opt:b</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">B</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">table</span>
  <span class="p">.</span><span class="nx">params</span><span class="p">({</span> <span class="nx">map</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">derive</span><span class="p">({</span> <span class="na">val</span><span class="p">:</span> <span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">$</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">op</span><span class="p">.</span><span class="nx">recode</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">val</span><span class="p">,</span> <span class="nx">$</span><span class="p">.</span><span class="nx">map</span><span class="p">,</span> <span class="dl">'</span><span class="s1">?</span><span class="dl">'</span><span class="p">)</span> <span class="p">})</span>
</code></pre></div></div>

<hr />
<p><a id="row_object" href="op.html#row_object">#</a>
<em>op</em>.<b>row_object</b>([<i>…columns</i>]) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/op-api.js">Source</a></p>

<p>Generate a new object containing the data for the current table row. The new object maps from column name keys to table values for the current row. The optional <em>columns</em> list indicates which columns to include in the object; if unspecified, all columns are included by default.</p>

<p>This method can only be invoked within a single-table expression. Calling this method in a multi-table expression (such as for a join) results in an error. An error will also result if any provided column names are specified using dynamic lookups of table column values.</p>

<ul>
  <li><em>columns</em>: A list of column names or indices to include in the object.</li>
</ul>

<p><em>Examples</em></p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">aq</span><span class="p">.</span><span class="nx">table</span><span class="p">({</span> <span class="na">a</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="na">b</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">derive</span><span class="p">({</span> <span class="na">row</span><span class="p">:</span> <span class="nx">op</span><span class="p">.</span><span class="nx">row_object</span><span class="p">()</span> <span class="p">})</span>
  <span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">row</span><span class="dl">'</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// { a: 1, b: 2 }</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// rollup a table into an array of row objects</span>
<span class="nx">table</span><span class="p">.</span><span class="nx">rollup</span><span class="p">({</span> <span class="na">rows</span><span class="p">:</span> <span class="nx">d</span> <span class="o">=&gt;</span> <span class="nx">op</span><span class="p">.</span><span class="nx">array_agg</span><span class="p">(</span><span class="nx">op</span><span class="p">.</span><span class="nx">row_object</span><span class="p">())</span> <span class="p">})</span>
</code></pre></div></div>

<p><br /></p>

<h3 id="string-functions"><a id="string-functions">String Functions</a></h3>

<hr />
<p><a id="parse_date" href="op.html#parse_date">#</a>
<em>op</em>.<b>parse_date</b>(<i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/string.js">Source</a></p>

<p>Parses a string <em>value</em> and returns a Date instance. Beware: this method uses JavaScript’s <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse"><code class="language-plaintext highlighter-rouge">Date.parse()</code></a> functionality, which is inconsistently implemented across browsers. That said, <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a> formatted strings such as those produced by <a href="op.html#format_date">format_date</a> and <a href="op.html#format_utcdate">format_utcdate</a> should be supported across platforms. Note that “bare” ISO date strings such as <code class="language-plaintext highlighter-rouge">"2001-01-01"</code> are interpreted by JavaScript as indicating midnight of that day in <a href="https://en.wikipedia.org/wiki/Coordinated_Universal_Time">Coordinated Universal Time (UTC)</a>, <em>not</em> local time. To indicate the local timezone, an ISO string can include additional time components and no <code class="language-plaintext highlighter-rouge">Z</code> suffix: <code class="language-plaintext highlighter-rouge">"2001-01-01T00:00"</code>.</p>

<ul>
  <li><em>value</em>: The input value.</li>
</ul>

<hr />
<p><a id="parse_float" href="op.html#parse_float">#</a>
<em>op</em>.<b>parse_float</b>(<i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/string.js">Source</a></p>

<p>Parses a string <em>value</em> and returns a floating point number.</p>

<ul>
  <li><em>value</em>: The input value.</li>
</ul>

<hr />
<p><a id="parse_int" href="op.html#parse_int">#</a>
<em>op</em>.<b>parse_int</b>(<i>value</i>[, <i>radix</i>]) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/string.js">Source</a></p>

<p>Parses a string <em>value</em> and returns an integer of the specified radix (the base in mathematical numeral systems).</p>

<ul>
  <li><em>value</em>: The input value.</li>
  <li><em>radix</em>: An integer between 2 and 36 that represents the radix (the base in mathematical numeral systems) of the string. Be careful: this does not default to 10! If <em>radix</em> is <code class="language-plaintext highlighter-rouge">undefined</code>, <code class="language-plaintext highlighter-rouge">0</code>, or unspecified, JavaScript assumes the following: If the input string begins with <code class="language-plaintext highlighter-rouge">"0x"</code> or <code class="language-plaintext highlighter-rouge">"0X"</code> (a zero, followed by lowercase or uppercase X), the radix is assumed to be 16 and the rest of the string is parsed as a hexidecimal number. If the input string begins with <code class="language-plaintext highlighter-rouge">"0"</code> (a zero), the radix is assumed to be 8 (octal) or 10 (decimal). Exactly which radix is chosen is implementation-dependent.  If the input string begins with any other value, the radix is 10 (decimal).</li>
</ul>

<hr />
<p><a id="endswith" href="op.html#endswith">#</a>
<em>op</em>.<b>endswith</b>(<i>value</i>, <i>search</i>[, <i>length</i>]) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/string.js">Source</a></p>

<p>Determines whether a string <em>value</em> ends with the characters of a specified <em>search</em> string, returning <code class="language-plaintext highlighter-rouge">true</code> or <code class="language-plaintext highlighter-rouge">false</code> as appropriate.</p>

<ul>
  <li><em>value</em>: The input string value.</li>
  <li><em>search</em>: The search string to test for.</li>
  <li><em>length</em>: If provided, used as the length of <em>value</em> (default <code class="language-plaintext highlighter-rouge">value.length</code>).</li>
</ul>

<hr />
<p><a id="match" href="op.html#match">#</a>
<em>op</em>.<b>match</b>(<i>value</i>, <i>regexp</i>[, <i>index</i>]) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/string.js">Source</a></p>

<p>Retrieves the result of matching a string <em>value</em> against a regular expression <em>regexp</em>. If no <em>index</em> is specified, returns an array whose contents depend on the presence or absence of the regular expression global (<code class="language-plaintext highlighter-rouge">g</code>) flag, or <code class="language-plaintext highlighter-rouge">null</code> if no matches are found. If the <code class="language-plaintext highlighter-rouge">g</code> flag is used, all results matching the complete regular expression will be returned, but capturing groups will not. If the <code class="language-plaintext highlighter-rouge">g</code> flag is not used, only the first complete match and its related capturing groups are returned.</p>

<p>If specified, the <em>index</em> looks up a value of the resulting match. If <em>index</em> is a number, the corresponding index of the result array is returned. If <em>index</em> is a string, the value of the corresponding <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions/Groups_and_Ranges">named capture group</a> is returned, or <code class="language-plaintext highlighter-rouge">null</code> if there is no such group.</p>

<ul>
  <li><em>value</em>: The input string value.</li>
  <li><em>regexp</em>: The <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions">regular expression</a> to match against.</li>
  <li><em>index</em>: The index into the match result array or capture group.</li>
</ul>

<p><em>Examples</em></p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// returns ['1', '2', '3']</span>
<span class="nx">op</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="dl">'</span><span class="s1">1 2 3</span><span class="dl">'</span><span class="p">,</span> <span class="sr">/</span><span class="se">\d</span><span class="sr">+/g</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// returns '2' (index into match array)</span>
<span class="nx">op</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="dl">'</span><span class="s1">1 2 3</span><span class="dl">'</span><span class="p">,</span> <span class="sr">/</span><span class="se">\d</span><span class="sr">+/g</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// returns '3' (index of capture group)</span>
<span class="nx">op</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="dl">'</span><span class="s1">1 2 3</span><span class="dl">'</span><span class="p">,</span> <span class="sr">/</span><span class="se">\d</span><span class="sr">+ </span><span class="se">\d</span><span class="sr">+ </span><span class="se">(\d</span><span class="sr">+</span><span class="se">)</span><span class="sr">/</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// returns '2' (named capture group)</span>
<span class="nx">op</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="dl">'</span><span class="s1">1 2 3</span><span class="dl">'</span><span class="p">,</span> <span class="sr">/</span><span class="se">\d</span><span class="sr">+ </span><span class="se">(?&lt;</span><span class="sr">digit&gt;</span><span class="se">\d</span><span class="sr">+</span><span class="se">)</span><span class="sr">/</span><span class="p">,</span> <span class="dl">'</span><span class="s1">digit</span><span class="dl">'</span><span class="p">)</span>
</code></pre></div></div>

<hr />
<p><a id="normalize" href="op.html#normalize">#</a>
<em>op</em>.<b>normalize</b>(<i>value</i>[, <i>form</i>]) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/string.js">Source</a></p>

<p>Returns the Unicode normalization form of the string <em>value</em>.</p>

<ul>
  <li><em>value</em>: The input string to normalize.</li>
  <li><em>form</em>: The Unicode normalization form, one of <code class="language-plaintext highlighter-rouge">'NFC'</code> (default, canonical decomposition, followed by canonical composition), <code class="language-plaintext highlighter-rouge">'NFD'</code> (canonical decomposition), <code class="language-plaintext highlighter-rouge">'NFKC'</code> (compatibility decomposition, followed by canonical composition), or <code class="language-plaintext highlighter-rouge">'NFKD'</code> (compatibility decomposition).</li>
</ul>

<hr />
<p><a id="padend" href="op.html#padend">#</a>
<em>op</em>.<b>padend</b>(<i>value</i>, <i>length</i>[, <i>fill</i>]) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/string.js">Source</a></p>

<p>Pad a string <em>value</em> with a given <em>fill</em> string (applied from the end of <em>value</em> and repeated, if needed) so that the resulting string reaches a given <em>length</em>.</p>

<ul>
  <li><em>value</em>: The input string to pad.</li>
  <li><em>length</em>: The length of the resulting string once the <em>value</em> string has been padded. If the length is lower than <code class="language-plaintext highlighter-rouge">value.length</code>, the <em>value</em> string will be returned as-is.</li>
  <li><em>fill</em>: The string to pad the <em>value</em> string with (default <code class="language-plaintext highlighter-rouge">''</code>). If <em>fill</em> is too long to stay within the target <em>length</em>, it will be truncated: for left-to-right languages the left-most part and for right-to-left languages the right-most will be applied.</li>
</ul>

<hr />
<p><a id="padstart" href="op.html#padstart">#</a>
<em>op</em>.<b>padstart</b>(<i>value</i>, <i>length</i>[, <i>fill</i>]) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/string.js">Source</a></p>

<p>Pad a string <em>value</em> with a given <em>fill</em> string (applied from the start of <em>value</em> and repeated, if needed) so that the resulting string reaches a given <em>length</em>.</p>

<ul>
  <li><em>value</em>: The input string to pad.</li>
  <li><em>length</em>: The length of the resulting string once the <em>value</em> string has been padded. If the length is lower than <code class="language-plaintext highlighter-rouge">value.length</code>, the <em>value</em> string will be returned as-is.</li>
  <li><em>fill</em>: The string to pad the <em>value</em> string with (default <code class="language-plaintext highlighter-rouge">''</code>). If <em>fill</em> is too long to stay within the target <em>length</em>, it will be truncated: for left-to-right languages the left-most part and for right-to-left languages the right-most will be applied.</li>
</ul>

<hr />
<p><a id="lower" href="op.html#lower">#</a>
<em>op</em>.<b>lower</b>(<i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/string.js">Source</a></p>

<p>Returns the string <em>value</em> converted to lower case.</p>

<ul>
  <li><em>value</em>: The input string value.</li>
</ul>

<hr />
<p><a id="upper" href="op.html#upper">#</a>
<em>op</em>.<b>upper</b>(<i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/string.js">Source</a></p>

<p>Returns the string <em>value</em> converted to upper case.</p>

<ul>
  <li><em>value</em>: The input string value.</li>
</ul>

<hr />
<p><a id="repeat" href="op.html#repeat">#</a>
<em>op</em>.<b>repeat</b>(<i>value</i>, <i>number</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/string.js">Source</a></p>

<p>Returns a new string which contains the specified <em>number</em> of copies of the <em>value</em> string concatenated together.</p>

<ul>
  <li><em>value</em>: The input string to repeat.</li>
  <li><em>number</em>: An integer between <code class="language-plaintext highlighter-rouge">0</code> and <code class="language-plaintext highlighter-rouge">+Infinity</code>, indicating the number of times to repeat the string.</li>
</ul>

<hr />
<p><a id="replace" href="op.html#replace">#</a>
<em>op</em>.<b>replace</b>(<i>value</i>, <i>pattern</i>, <i>replacement</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/string.js">Source</a></p>

<p>Returns a new string with some or all matches of a <em>pattern</em> replaced by a <em>replacement</em>. The <em>pattern</em> can be a string or a regular expression, and the <em>replacement</em> must be a string. If <em>pattern</em> is a string, only the first occurrence will be replaced; to make multiple replacements, use a regular expression <em>pattern</em> with a <code class="language-plaintext highlighter-rouge">g</code> (global) flag.</p>

<ul>
  <li><em>value</em>: The input string value.</li>
  <li><em>pattern</em>: The pattern string or regular expression to replace.</li>
  <li><em>replacement</em>: The replacement string to use.</li>
</ul>

<hr />
<p><a id="split" href="op.html#split">#</a>
<em>op</em>.<b>split</b>(<i>value</i>, <i>separator</i>[, <i>limit</i>]) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/string.js">Source</a></p>

<p>Divides a string <em>value</em> into an ordered list of substrings based on a <em>separator</em> pattern, puts these substrings into an array, and returns the array.</p>

<ul>
  <li><em>value</em>: The input string value.</li>
  <li><em>separator</em>: A string or regular expression pattern describing where each split should occur.</li>
  <li><em>limit</em>: An integer specifying a limit on the number of substrings to be included in the array.</li>
</ul>

<hr />
<p><a id="startswith" href="op.html#startswith">#</a>
<em>op</em>.<b>startswith</b>(<i>value</i>, <i>search</i>[, <i>position</i>]) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/string.js">Source</a></p>

<p>Determines whether a string <em>value</em> starts with the characters of a specified <em>search</em> string, returning <code class="language-plaintext highlighter-rouge">true</code> or <code class="language-plaintext highlighter-rouge">false</code> as appropriate.</p>

<ul>
  <li><em>value</em>: The input string value.</li>
  <li><em>search</em>: The search string to test for.</li>
  <li><em>position</em>: The position in the <em>value</em> string at which to begin searching (default <code class="language-plaintext highlighter-rouge">0</code>).</li>
</ul>

<hr />
<p><a id="substring" href="op.html#substring">#</a>
<em>op</em>.<b>substring</b>(<i>value</i>[, <i>start</i>, <i>end</i>]) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/string.js">Source</a></p>

<p>Returns the part of the string <em>value</em> between the <em>start</em> and <em>end</em> indexes, or to the end of the string.</p>

<ul>
  <li><em>value</em>: The input string value.</li>
  <li><em>start</em>: The index of the first character to include in the returned substring (default <code class="language-plaintext highlighter-rouge">0</code>).</li>
  <li><em>end</em>: The index of the first character to exclude from the returned substring (default <code class="language-plaintext highlighter-rouge">value.length</code>).</li>
</ul>

<hr />
<p><a id="trim" href="op.html#trim">#</a>
<em>op</em>.<b>trim</b>(<i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/functions/string.js">Source</a></p>

<p>Returns a new string with whitespace removed from both ends of the input <em>value</em> string. Whitespace in this context is all the whitespace characters (space, tab, no-break space, etc.) and all the line terminator characters (LF, CR, etc.).</p>

<ul>
  <li><em>value</em>: The input string value to trim.</li>
</ul>

<p><br /></p>

<h2 id="aggregate-functions"><a id="aggregate-functions">Aggregate Functions</a></h2>

<p>Aggregate table expression functions for summarizing values. If invoked outside a table expression context, column (field) inputs must be column name strings, and the operator will return a corresponding table expression.</p>

<hr />
<p><a id="any" href="op.html#any">#</a>
<em>op</em>.<b>any</b>(<i>field</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/aggregate-functions.js">Source</a></p>

<p>Aggregate function returning an arbitrary observed value (typically the first encountered).</p>

<ul>
  <li><em>field</em>: The data column or derived field.</li>
</ul>

<hr />
<p><a id="bins" href="op.html#bins">#</a>
<em>op</em>.<b>bins</b>(<i>field</i>[, <i>maxbins</i>, <i>nice</i>, <i>minstep</i>, <i>step</i>]) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/aggregate-functions.js">Source</a></p>

<p>Aggregate function for calculating a binning scheme in terms of the minimum bin boundary, maximum bin boundary, and step size.</p>

<ul>
  <li><em>field</em>: The data column or derived field.</li>
  <li><em>maxbins</em>: The maximum number of allowed bins (default <code class="language-plaintext highlighter-rouge">15</code>).</li>
  <li><em>nice</em>: Boolean flag (default <code class="language-plaintext highlighter-rouge">true</code>) indicating if the bin min and max should snap to “nice” human-friendly values such as multiples of 10.</li>
  <li><em>minstep</em>: The minimum allowed step size between bins.</li>
  <li><em>step</em>: The exact step size to use between bins. If specified, the <em>maxbins</em> and <em>minstep</em> arguments are ignored.</li>
</ul>

<hr />
<p><a id="count" href="op.html#count">#</a>
<em>op</em>.<b>count</b>() · <a href="https://github.com/uwdata/arquero/blob/master/src/op/aggregate-functions.js">Source</a></p>

<p>Aggregate function to count the number of records (rows).</p>

<hr />
<p><a id="distinct" href="op.html#distinct">#</a>
<em>op</em>.<b>distinct</b>(<i>field</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/aggregate-functions.js">Source</a></p>

<p>Aggregate function to count the number of distinct values.</p>

<ul>
  <li><em>field</em>: The data column or derived field.</li>
</ul>

<hr />
<p><a id="valid" href="op.html#valid">#</a>
<em>op</em>.<b>valid</b>(<i>field</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/aggregate-functions.js">Source</a></p>

<p>Aggregate function to count the number of valid values. Invalid values are <code class="language-plaintext highlighter-rouge">null</code>, <code class="language-plaintext highlighter-rouge">undefined</code>, or <code class="language-plaintext highlighter-rouge">NaN</code>.</p>

<ul>
  <li><em>field</em>: The data column or derived field.</li>
</ul>

<hr />
<p><a id="invalid" href="op.html#invalid">#</a>
<em>op</em>.<b>invalid</b>(<i>field</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/aggregate-functions.js">Source</a></p>

<p>Aggregate function to count the number of invalid values. Invalid values are <code class="language-plaintext highlighter-rouge">null</code>, <code class="language-plaintext highlighter-rouge">undefined</code>, or <code class="language-plaintext highlighter-rouge">NaN</code>.</p>

<ul>
  <li><em>field</em>: The data column or derived field.</li>
</ul>

<hr />
<p><a id="max" href="op.html#max">#</a>
<em>op</em>.<b>max</b>(<i>field</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/aggregate-functions.js">Source</a></p>

<p>Aggregate function for the maximum value. For a non-aggregate version, see <a href="op.html#greatest">op.greatest</a>.</p>

<ul>
  <li><em>field</em>: The data column or derived field.</li>
</ul>

<hr />
<p><a id="min" href="op.html#min">#</a>
<em>op</em>.<b>min</b>(<i>field</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/aggregate-functions.js">Source</a></p>

<p>Aggregate function for the minimum value. For a non-aggregate version, see <a href="op.html#least">op.least</a>.</p>

<ul>
  <li><em>field</em>: The data column or derived field.</li>
</ul>

<hr />
<p><a id="sum" href="op.html#sum">#</a>
<em>op</em>.<b>sum</b>(<i>field</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/aggregate-functions.js">Source</a></p>

<p>Aggregate function to sum values.</p>

<ul>
  <li><em>field</em>: The data column or derived field.</li>
</ul>

<hr />
<p><a id="product" href="op.html#product">#</a>
<em>op</em>.<b>product</b>(<i>field</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/aggregate-functions.js">Source</a></p>

<p>Aggregate function to multiply values.</p>

<ul>
  <li><em>field</em>: The data column or derived field.</li>
</ul>

<hr />
<p><a id="mean" href="op.html#mean">#</a>
<em>op</em>.<b>mean</b>(<i>field</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/aggregate-functions.js">Source</a></p>

<p>Aggregate function for the mean (average) value. This operator is a synonym for <a href="op.html#average">average</a>.</p>

<ul>
  <li><em>field</em>: The data column or derived field.</li>
</ul>

<hr />
<p><a id="average" href="op.html#average">#</a>
<em>op</em>.<b>average</b>(<i>field</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/aggregate-functions.js">Source</a></p>

<p>Aggregate function for the average (mean) value. This operator is a synonym for <a href="op.html#mean">mean</a>.</p>

<ul>
  <li><em>field</em>: The data column or derived field.</li>
</ul>

<hr />
<p><a id="mode" href="op.html#mode">#</a>
<em>op</em>.<b>mode</b>(<i>field</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/aggregate-functions.js">Source</a></p>

<p>Aggregate function to determine the mode (most frequent) value.</p>

<ul>
  <li><em>field</em>: The data column or derived field.</li>
</ul>

<hr />
<p><a id="median" href="op.html#median">#</a>
<em>op</em>.<b>median</b>(<i>field</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/aggregate-functions.js">Source</a></p>

<p>Aggregate function for the median value. This operation is a shorthand for the <a href="op.html#quantile">quantile</a> value at p = 0.5.</p>

<ul>
  <li><em>field</em>: The data column or derived field.</li>
</ul>

<hr />
<p><a id="quantile" href="op.html#quantile">#</a>
<em>op</em>.<b>quantile</b>(<i>field</i>, <i>p</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/aggregate-functions.js">Source</a></p>

<p>Aggregate function to compute the quantile boundary of a data field for a probability threshold. The <a href="op.html#median">median</a> is the value of quantile at p = 0.5.</p>

<ul>
  <li><em>field</em>: The data column or derived field.</li>
  <li><em>p</em>: The probability threshold.</li>
</ul>

<hr />
<p><a id="stdev" href="op.html#stdev">#</a>
<em>op</em>.<b>stdev</b>(<i>field</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/aggregate-functions.js">Source</a></p>

<p>Aggregate function for the sample standard deviation.</p>

<ul>
  <li><em>field</em>: The data column or derived field.</li>
</ul>

<hr />
<p><a id="stdevp" href="op.html#stdevp">#</a>
<em>op</em>.<b>stdevp</b>(<i>field</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/aggregate-functions.js">Source</a></p>

<p>Aggregate function for the population standard deviation.</p>

<ul>
  <li><em>field</em>: The data column or derived field.</li>
</ul>

<hr />
<p><a id="variance" href="op.html#variance">#</a>
<em>op</em>.<b>variance</b>(<i>field</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/aggregate-functions.js">Source</a></p>

<p>Aggregate function for the sample variance.</p>

<ul>
  <li><em>field</em>: The data column or derived field.</li>
</ul>

<hr />
<p><a id="variancep" href="op.html#variancep">#</a>
<em>op</em>.<b>variancep</b>(<i>field</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/aggregate-functions.js">Source</a></p>

<p>Aggregate function for the population variance.</p>

<hr />
<p><a id="corr" href="op.html#corr">#</a>
<em>op</em>.<b>corr</b>(<i>field1</i>, <i>field2</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/aggregate-functions.js">Source</a></p>

<p>Aggregate function for the <a href="https://en.wikipedia.org/wiki/Pearson_correlation_coefficient">product-moment correlation</a> between two variables. To instead compute a <a href="https://en.wikipedia.org/wiki/Spearman%27s_rank_correlation_coefficient">rank correlation</a>, compute the average ranks for each variable and then apply this function to the result.</p>

<ul>
  <li><em>field1</em>: The first data column or derived field.</li>
  <li><em>field2</em>: The second data column or derived field.</li>
</ul>

<hr />
<p><a id="covariance" href="op.html#covariance">#</a>
<em>op</em>.<b>covariance</b>(<i>field1</i>, <i>field2</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/aggregate-functions.js">Source</a></p>

<p>Aggregate function for the sample covariance between two variables.</p>

<ul>
  <li><em>field1</em>: The first data column or derived field.</li>
  <li><em>field2</em>: The second data column or derived field.</li>
</ul>

<hr />
<p><a id="covariancep" href="op.html#covariancep">#</a>
<em>op</em>.<b>covariancep</b>(<i>field1</i>, <i>field2</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/aggregate-functions.js">Source</a></p>

<p>Aggregate function for the population covariance between two variables.</p>

<ul>
  <li><em>field1</em>: The first data column or derived field.</li>
  <li><em>field2</em>: The second data column or derived field.</li>
</ul>

<hr />
<p><a id="array_agg" href="op.html#array_agg">#</a>
<em>op</em>.<b>array_agg</b>(<i>field</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/aggregate-functions.js">Source</a></p>

<p>Aggregate function to collect an array of <em>field</em> values. The resulting aggregate is an array (one per group) containing all observed values. The order of values is sensitive to any <a href="https://idl.uw.edu/arquero/api/verbs#orderby">orderby</a> criteria.</p>

<ul>
  <li><em>field</em>: The data column or derived field.</li>
</ul>

<p><em>Examples</em></p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">aq</span><span class="p">.</span><span class="nx">table</span><span class="p">({</span> <span class="na">v</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">rollup</span><span class="p">({</span> <span class="na">a</span><span class="p">:</span> <span class="nx">op</span><span class="p">.</span><span class="nx">array_agg</span><span class="p">(</span><span class="dl">'</span><span class="s1">v</span><span class="dl">'</span><span class="p">)</span> <span class="p">})</span> <span class="c1">// a: [ [1, 2, 3, 1] ]</span>
</code></pre></div></div>

<hr />
<p><a id="array_agg_distinct" href="op.html#array_agg_distinct">#</a>
<em>op</em>.<b>array_agg_distinct</b>(<i>field</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/aggregate-functions.js">Source</a></p>

<p>Aggregate function to collect an array of distinct (unique) <em>field</em> values. The resulting aggregate is an array (one per group) containing all unique values. The order of values is sensitive to any <a href="https://idl.uw.edu/arquero/api/verbs#orderby">orderby</a> criteria.</p>

<ul>
  <li><em>field</em>: The data column or derived field.</li>
</ul>

<p><em>Examples</em></p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">aq</span><span class="p">.</span><span class="nx">table</span><span class="p">({</span> <span class="na">v</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">rollup</span><span class="p">({</span> <span class="na">a</span><span class="p">:</span> <span class="nx">op</span><span class="p">.</span><span class="nx">array_agg_distinct</span><span class="p">(</span><span class="dl">'</span><span class="s1">v</span><span class="dl">'</span><span class="p">)</span> <span class="p">})</span> <span class="c1">// a: [ [1, 2, 3] ]</span>
</code></pre></div></div>

<hr />
<p><a id="object_agg" href="op.html#object_agg">#</a>
<em>op</em>.<b>object_agg</b>(<i>key</i>, <i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/aggregate-functions.js">Source</a></p>

<p>Aggregate function to create an object given input <em>key</em> and <em>value</em> fields. The resulting aggregate is an object (one per group) with keys and values defined by the input fields. For any keys that occur multiple times in a group, the most recently observed value is used. The order in which keys and values are observed is sensitive to any <a href="https://idl.uw.edu/arquero/api/verbs#orderby">orderby</a> criteria.</p>

<ul>
  <li><em>key</em>: The object key field, should be a string or string-coercible value.</li>
  <li><em>value</em> The object value field.</li>
</ul>

<p><em>Examples</em></p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">aq</span><span class="p">.</span><span class="nx">table</span><span class="p">({</span> <span class="na">k</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">],</span> <span class="na">v</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">rollup</span><span class="p">({</span> <span class="na">o</span><span class="p">:</span> <span class="nx">op</span><span class="p">.</span><span class="nx">object_agg</span><span class="p">(</span><span class="dl">'</span><span class="s1">k</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">v</span><span class="dl">'</span><span class="p">)</span> <span class="p">})</span> <span class="c1">// o: [ { a: 3, b: 2 } ]</span>
</code></pre></div></div>

<hr />
<p><a id="map_agg" href="op.html#map_agg">#</a>
<em>op</em>.<b>map_agg</b>(<i>key</i>, <i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/aggregate-functions.js">Source</a></p>

<p>Aggregate function to create a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map">Map</a> given input <em>key</em> and <em>value</em> fields. The resulting aggregate is a Map (one per group) with keys and values defined by the input fields. For any keys that occur multiple times in a group, the most recently observed value is used. The order in which keys and values are observed is sensitive to any <a href="https://idl.uw.edu/arquero/api/verbs#orderby">orderby</a> criteria.</p>

<ul>
  <li><em>key</em>: The key field.</li>
  <li><em>value</em> The value field.</li>
</ul>

<p><em>Examples</em></p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">aq</span><span class="p">.</span><span class="nx">table</span><span class="p">({</span> <span class="na">k</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">],</span> <span class="na">v</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">rollup</span><span class="p">({</span> <span class="na">m</span><span class="p">:</span> <span class="nx">op</span><span class="p">.</span><span class="nx">map_agg</span><span class="p">(</span><span class="dl">'</span><span class="s1">k</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">v</span><span class="dl">'</span><span class="p">)</span> <span class="p">})</span> <span class="c1">// m: [ new Map([['a', 3], ['b', 2]]) ]</span>
</code></pre></div></div>

<hr />
<p><a id="entries_agg" href="op.html#entries_agg">#</a>
<em>op</em>.<b>entries_agg</b>(<i>key</i>, <i>value</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/aggregate-functions.js">Source</a></p>

<p>Aggregate function to create an array in the style of <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/entries">Object.entries</a> given input <em>key</em> and <em>value</em> fields. The resulting aggregate is an array (one per group) with [key, value] arrays defined by the input fields, and may include duplicate keys. The order of entries is sensitive to any <a href="https://idl.uw.edu/arquero/api/verbs#orderby">orderby</a> criteria.</p>

<ul>
  <li><em>key</em>: The key field.</li>
  <li><em>value</em> The value field.</li>
</ul>

<p><em>Examples</em></p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">aq</span><span class="p">.</span><span class="nx">table</span><span class="p">({</span> <span class="na">k</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">],</span> <span class="na">v</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">rollup</span><span class="p">({</span> <span class="na">e</span><span class="p">:</span> <span class="nx">op</span><span class="p">.</span><span class="nx">entries_agg</span><span class="p">(</span><span class="dl">'</span><span class="s1">k</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">v</span><span class="dl">'</span><span class="p">)</span> <span class="p">})</span> <span class="c1">// e: [ [['a', 1], ['b', 2], ['a', 3]] ]</span>
</code></pre></div></div>

<p><br /></p>

<h2 id="window-functions"><a id="window-functions">Window Functions</a></h2>

<p>Window table expression functions applicable over ordered table rows. If invoked outside a table expression context, column (field) inputs must be column name strings, and the operator will return a corresponding table expression.</p>

<hr />
<p><a id="row_number" href="op.html#row_number">#</a>
<em>op</em>.<b>row_number</b>() · <a href="https://github.com/uwdata/arquero/blob/master/src/op/window-functions.js">Source</a></p>

<p>Window function to assign consecutive row numbers, starting from 1.</p>

<hr />
<p><a id="rank" href="op.html#rank">#</a>
<em>op</em>.<b>rank</b>() · <a href="https://github.com/uwdata/arquero/blob/master/src/op/window-functions.js">Source</a></p>

<p>Window function to assign a rank to each value in a group, starting from 1. Peer values are assigned the same rank. Subsequent ranks reflect the number of prior values: if the first two values tie for rank 1, the third value is assigned rank 3.</p>

<hr />
<p><a id="avg_rank" href="op.html#avg_rank">#</a>
<em>op</em>.<b>avg_rank</b>() · <a href="https://github.com/uwdata/arquero/blob/master/src/op/window-functions.js">Source</a></p>

<p>Window function to assign a fractional (average) rank to each value in a group, starting from 1. Peer values are assigned the average of their indices: if the first two values tie, both will be assigned rank 1.5.</p>

<hr />
<p><a id="dense_rank" href="op.html#dense_rank">#</a>
<em>op</em>.<b>dense_rank</b>() · <a href="https://github.com/uwdata/arquero/blob/master/src/op/window-functions.js">Source</a></p>

<p>Window function to assign a dense rank to each value in a group, starting from 1. Peer values are assigned the same rank. Subsequent ranks do not reflect the number of prior values: if the first two values tie for rank 1, the third value is assigned rank 2.</p>

<hr />
<p><a id="percent_rank" href="op.html#percent_rank">#</a>
<em>op</em>.<b>percent_rank</b>() · <a href="https://github.com/uwdata/arquero/blob/master/src/op/window-functions.js">Source</a></p>

<p>Window function to assign a percentage rank to each value in a group. The percent is calculated as <em>(rank - 1) / (group_size - 1)</em>.</p>

<hr />
<p><a id="cume_dist" href="op.html#cume_dist">#</a>
<em>op</em>.<b>cume_dist</b>() · <a href="https://github.com/uwdata/arquero/blob/master/src/op/window-functions.js">Source</a></p>

<p>Window function to assign a cumulative distribution value between 0 and 1 to each value in a group.</p>

<hr />
<p><a id="ntile" href="op.html#ntile">#</a>
<em>op</em>.<b>ntile</b>(<i>num</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/window-functions.js">Source</a></p>

<p>Window function to assign a quantile (e.g., percentile) value to each value in a group. Accepts an integer parameter indicating the number of buckets to use (e.g., 100 for percentiles, 5 for quintiles).</p>

<ul>
  <li><em>num</em>: The number of buckets for ntile calculation.</li>
</ul>

<hr />
<p><a id="lag" href="op.html#lag">#</a>
<em>op</em>.<b>lag</b>(<i>field</i>[, <i>offset</i>, <i>defaultValue</i>]) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/window-functions.js">Source</a></p>

<p>Window function to assign a value that precedes the current value by a specified number of positions. If no such value exists, returns a default value instead.</p>

<ul>
  <li><em>field</em>: The data column or derived field.</li>
  <li><em>offset</em>: The lag offset (default <code class="language-plaintext highlighter-rouge">1</code>) from the current value.</li>
  <li><em>defaultValue</em>: The default value (default <code class="language-plaintext highlighter-rouge">undefined</code>).</li>
</ul>

<hr />
<p><a id="lead" href="op.html#lead">#</a>
<em>op</em>.<b>lead</b>(<i>field</i>[, <i>offset</i>, <i>defaultValue</i>]) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/window-functions.js">Source</a></p>

<p>Window function to assign a value that follows the current value by a specified number of positions. If no such value exists, returns a default value instead.</p>

<ul>
  <li><em>field</em>: The data column or derived field.</li>
  <li><em>offset</em>: The lead offset (default <code class="language-plaintext highlighter-rouge">1</code>) from the current value.</li>
  <li><em>defaultValue</em>: The default value (default <code class="language-plaintext highlighter-rouge">undefined</code>).</li>
</ul>

<hr />
<p><a id="first_value" href="op.html#first_value">#</a>
<em>op</em>.<b>first_value</b>(<i>field</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/window-functions.js">Source</a></p>

<p>Window function to assign the first value in a sliding window frame.</p>

<ul>
  <li><em>field</em>: The data column or derived field.</li>
</ul>

<hr />
<p><a id="last_value" href="op.html#last_value">#</a>
<em>op</em>.<b>last_value</b>(<i>field</i>) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/window-functions.js">Source</a></p>

<p>Window function to assign the last value in a sliding window frame.</p>

<ul>
  <li><em>field</em>: The data column or derived field.</li>
</ul>

<hr />
<p><a id="nth_value" href="op.html#nth_value">#</a>
<em>op</em>.<b>nth_value</b>(<i>field</i>[, <i>nth</i>]) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/window-functions.js">Source</a></p>

<p>Window function to assign the nth value in a sliding window frame (counting from 1), or <code class="language-plaintext highlighter-rouge">undefined</code> if no such value exists.</p>

<ul>
  <li><em>field</em>: The data column or derived field.</li>
  <li><em>nth</em>: The nth position, starting from 1.</li>
</ul>

<hr />
<p><a id="fill_down" href="op.html#fill_down">#</a>
<em>op</em>.<b>fill_down</b>(<i>field</i>[, <i>defaultValue</i>]) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/window-functions.js">Source</a></p>

<p>Window function to fill in missing values with preceding values. Returns the value at the current window position if it is valid (not <code class="language-plaintext highlighter-rouge">null</code>, <code class="language-plaintext highlighter-rouge">undefined</code>, or <code class="language-plaintext highlighter-rouge">NaN</code>), otherwise returns the first preceding valid value. If no such value exists, returns the default value.</p>

<ul>
  <li><em>field</em>: The data column or derived field.</li>
  <li><em>defaultValue</em>: The default value (default <code class="language-plaintext highlighter-rouge">undefined</code>).</li>
</ul>

<hr />
<p><a id="fill_up" href="op.html#fill_up">#</a>
<em>op</em>.<b>fill_up</b>(<i>field</i>[, <i>defaultValue</i>]) · <a href="https://github.com/uwdata/arquero/blob/master/src/op/window-functions.js">Source</a></p>

<p>Window function to fill in missing values with subsequent values. Returns the value at the current window position if it is valid (not <code class="language-plaintext highlighter-rouge">null</code>, <code class="language-plaintext highlighter-rouge">undefined</code>, or <code class="language-plaintext highlighter-rouge">NaN</code>), otherwise returns the first subsequent valid value. If no such value exists, returns the default value.</p>

<ul>
  <li><em>field</em>: The data column or derived field.</li>
  <li><em>defaultValue</em>: The default value (default <code class="language-plaintext highlighter-rouge">undefined</code>).</li>
</ul>


      
      <div class="footer border-top border-gray-light mt-5 pt-3 text-right text-gray">
        This site is open source. <a href="https://github.com/uwdata/arquero/edit/main/docs/api/op.md">Improve this page</a>.
      </div>
      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
